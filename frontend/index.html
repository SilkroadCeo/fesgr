<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muji - Anonymous Dating</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        :root {
            --primary: #ff6b9d;
            --primary-dark: #8b225e;
            --secondary: #667eea;
            --accent: #764ba2;
            --background: #0f0f0f;
            --surface: #1a1a1a;
            --card: #2a2a2a;
            --text: #ffffff;
            --text-secondary: #b0b0b0;
            --success: #28a745;
            --warning: #ffc107;
            --error: #dc3545;
        }

        body {
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Анимированный фон */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(255, 107, 157, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(118, 75, 162, 0.05) 0%, transparent 50%);
            z-index: -1;
            animation: backgroundShift 20s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        /* VIP каталоги */
        .vip-catalogs {
            margin: 30px 0;
            padding: 0 20px;
        }

        .vip-catalogs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .vip-catalog-card {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            border-radius: 20px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .vip-catalog-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .vip-catalog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .vip-catalog-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .vip-catalog-price {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .vip-profiles-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .vip-profile-preview {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 3/4;
            background: var(--card);
        }

        .vip-profile-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(8px);
            transition: filter 0.3s ease;
        }

        .vip-profile-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 15px;
            color: white;
        }

        .vip-profile-info {
            text-align: center;
        }

        .vip-profile-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .vip-profile-age {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .vip-profile-city {
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 2px;
        }

        .unlock-btn {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .unlock-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            color: white;
            text-decoration: none;
        }

        .vip-catalog-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Баннер под статистикой */
        .stats-banner {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            padding: 15px 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            color: white;
            display: none;
        }

        .stats-banner-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stats-banner-text {
            flex: 1;
            font-weight: 600;
            font-size: 14px;
        }

        .stats-banner-link {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stats-banner-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .close-stats-banner {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-stats-banner:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Language Selector */
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }

        .language-btn {
            background: rgba(255, 107, 157, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.2);
        }

        .language-btn:hover {
            background: rgba(255, 107, 157, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.3);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--surface);
            backdrop-filter: blur(20px);
            border: 1px solid var(--primary);
            border-radius: 15px;
            margin-top: 10px;
            min-width: 150px;
            display: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .language-dropdown.active {
            display: block;
            animation: dropdownAppear 0.3s ease;
        }

        @keyframes dropdownAppear {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 107, 157, 0.1);
            font-size: 14px;
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: rgba(255, 107, 157, 0.1);
        }

        /* Экран загрузки */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 50%, var(--background) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-content {
            text-align: center;
            animation: fadeInUp 1s ease;
        }

        .loading-logo {
            font-size: 48px;
            font-weight: 400;
            background: linear-gradient(45deg, #fff, #ff8fab);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            letter-spacing: 8px;
            text-transform: capitalize;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .loading-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            font-weight: 500;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        /* Хедер */
        .main-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            position: relative;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .logo {
            font-size: 3rem;
            font-weight: 600;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            letter-spacing: 8px;
            text-transform: capitalize;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 30px;
            font-weight: 400;
        }

        /* Иконка незавершенной оплаты */
        .pending-payment-icon {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.5);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .pending-payment-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 107, 157, 0.7);
        }

        .pending-payment-icon svg {
            color: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--error);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            border: 2px solid var(--background);
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 5px 20px rgba(255, 107, 157, 0.5);
            }
            50% {
                box-shadow: 0 5px 30px rgba(255, 107, 157, 0.8);
            }
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Кнопка фильтров */
        .filters-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 5px;
            z-index: 1001;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
        }

        .filters-toggle:hover {
            background: var(--secondary);
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .filter-bar {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        /* Боковые фильтры */
        .filters-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .filters-sidebar {
            position: fixed;
            top: 0;
            left: -400px;
            width: 380px;
            height: 100vh;
            background: var(--surface);
            border-right: 1px solid var(--primary);
            z-index: 1002;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            padding: 30px;
            box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
        }

        .filters-sidebar.active {
            left: 0;
        }

        .filters-header {
            padding: 0 0 30px 0;
            border-bottom: 1px solid rgba(255, 107, 157, 0.2);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .filters-title {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 700;
        }

        .close-btn {
            background: rgba(255, 107, 157, 0.1);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: rotate(90deg);
        }

        .filter-group {
            margin-bottom: 30px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 12px;
            color: var(--primary);
            font-weight: 600;
            font-size: 1rem;
        }

        .modern-select {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 107, 157, 0.05);
            border: 2px solid var(--primary);
            border-radius: 15px;
            color: var(--text);
            font-size: 16px;
            outline: none;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ff6b9d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 20px center;
            background-size: 16px;
            transition: all 0.3s ease;
        }

        .modern-select:hover {
            background-color: rgba(255, 107, 157, 0.1);
            border-color: var(--secondary);
        }

        .modern-select:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .range-inputs {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .range-inputs input {
            flex: 1;
            text-align: center;
            padding: 15px;
            background: rgba(255, 107, 157, 0.05);
            border: 1px solid var(--primary);
            border-radius: 12px;
            color: var(--text);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .range-inputs input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        .range-inputs span {
            color: var(--text-secondary);
            font-weight: 600;
            min-width: 20px;
        }

        .filter-actions {
            display: flex;
            gap: 15px;
            margin-top: 40px;
        }

        .filter-actions .btn {
            flex: 1;
        }

        /* Активные фильтры */
        .active-filters {
            display: flex;
            gap: 10px;
            margin: 0 0 20px 0;
            flex-wrap: wrap;
            padding: 20px;
            background: var(--surface);
            border-radius: 20px;
            border: 1px solid rgba(255, 107, 157, 0.2);
        }

        .filter-tag {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .filter-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }

        .filter-tag .remove {
            cursor: pointer;
            font-weight: bold;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .filter-tag .remove:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Сетка карточек */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Карточки */
        .card {
            background: var(--card);
            border-radius: 25px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 107, 157, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.3);
            border-color: rgba(255, 107, 157, 0.3);
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 700;
            z-index: 2;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .card-image {
            width: 100%;
            height: 280px;
            object-fit: cover;
            display: block;
            transition: transform 0.4s ease;
        }

        .card:hover .card-image {
            transform: scale(1.05);
        }

        .card-content {
            padding: 25px;
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 280px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-age {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .card-info {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-stats {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .stat-badge {
            background: rgba(255, 107, 157, 0.1);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid rgba(255, 107, 157, 0.2);
            transition: all 0.3s ease;
        }

        .stat-badge:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: translateY(-2px);
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-actions {
            display: flex;
            gap: 12px;
            margin-top: auto;
        }

        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.6);
        }

        .btn-secondary {
            background: rgba(255, 107, 157, 0.1);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-secondary:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .btn-pay {
            background: linear-gradient(135deg, var(--success), #1e7e34);
            color: white;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-pay:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.6);
        }

        .btn-promo {
            background: linear-gradient(135deg, var(--warning), #e0a800);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .btn-promo:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.6);
        }

        /* Loading states */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            font-size: 18px;
            grid-column: 1 / -1;
        }

        .no-profiles {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
            font-size: 18px;
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
            border-radius: 20px;
            margin: 20px 0;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .no-profiles::before {
            content: "";
            display: block;
            font-size: 4rem;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--surface);
            margin: 20px auto;
            width: 95%;
            max-width: 500px;
            border-radius: 25px;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 107, 157, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid rgba(255, 107, 157, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(102, 126, 234, 0.1));
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-body {
            padding: 30px;
        }

        /* Слайдер фото с свайпом */
        .slider {
            position: relative;
            margin-bottom: 20px;
        }

        .slider-main {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            background: var(--card);
        }

        .slider-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .slider-image.active {
            display: block;
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            transform: translateY(-50%);
            z-index: 2;
        }

        .slider-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .slider-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .slider-thumbs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .slider-thumb {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .slider-thumb.active {
            border-color: var(--primary);
        }

        .slider-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Комментарии */
        .comments-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 107, 157, 0.1);
        }

        .comments-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .comment-form {
            background: rgba(255, 107, 157, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 157, 0.1);
            display: none;
        }

        .comment-form.active {
            display: block;
        }

        .comment-permission-required {
            background: rgba(255, 107, 157, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 157, 0.2);
            text-align: center;
        }

        .comment-permission-text {
            color: var(--text);
            margin-bottom: 15px;
            font-size: 14px;
        }

        .comment-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: 12px;
            color: var(--text);
            font-size: 14px;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 80px;
        }

        .comment-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .rating-select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: 12px;
            color: var(--text);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .comments-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .comment {
            background: rgba(255, 107, 157, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 107, 157, 0.1);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .comment-author {
            font-weight: 600;
            color: var(--primary);
        }

        .comment-date {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .comment-text {
            color: var(--text);
            line-height: 1.5;
            font-size: 14px;
        }

        .no-comments {
            text-align: center;
            color: var(--text-secondary);
            padding: 30px;
            font-style: italic;
        }

        /* Промокод модалка */
        .promo-modal .modal-content {
            max-width: 400px;
        }

        .promo-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .promo-input {
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 107, 157, 0.05);
            border: 2px solid var(--primary);
            border-radius: 15px;
            color: var(--text);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .promo-input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .promo-result {
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .promo-success {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .promo-error {
            background: rgba(220, 53, 69, 0.1);
            color: var(--error);
            border: 1px solid var(--error);
        }

        /* Чат */
        .chat-modal {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85%;
            background: var(--surface);
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            z-index: 2001;
            border: 1px solid rgba(255, 107, 157, 0.2);
            box-shadow: 0 -10px 50px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255, 107, 157, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(102, 126, 234, 0.1));
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }

        .chat-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .chat-warning {
            padding: 15px 25px;
            background: rgba(255, 193, 7, 0.1);
            border-bottom: 1px solid rgba(255, 193, 7, 0.3);
            color: #ffc107;
            font-size: 13px;
            line-height: 1.5;
            text-align: center;
        }

        .chat-body {
            padding: 25px;
            height: calc(100% - 210px);
            overflow-y: auto;
            background: var(--background);
        }

        .chat-footer {
            padding: 20px;
            border-top: 1px solid rgba(255, 107, 157, 0.1);
            display: flex;
            gap: 15px;
            align-items: flex-end;
            background: var(--surface);
        }

        .chat-input-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-input {
            padding: 15px 20px;
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: 25px;
            outline: none;
            background: rgba(255, 107, 157, 0.05);
            color: var(--text);
            font-size: 16px;
            resize: none;
            min-height: 50px;
            max-height: 120px;
        }

        .chat-input::placeholder {
            color: var(--text-secondary);
        }

        .file-input {
            display: none;
        }

        .file-btn {
            background: rgba(255, 107, 157, 0.1);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--primary);
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .file-btn:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: scale(1.1);
        }

        .chat-send {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .chat-send:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.6);
        }

        .message {
            margin-bottom: 20px;
            max-width: 80%;
            animation: messageAppear 0.3s ease;
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.user {
            margin-left: auto;
        }

        .message.other {
            margin-right: auto;
        }

        .message-bubble {
            padding: 15px 20px;
            border-radius: 25px;
            word-wrap: break-word;
            position: relative;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 25px 25px 8px 25px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        .message.other .message-bubble {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            border-radius: 25px 25px 25px 8px;
            border: 1px solid rgba(255, 107, 157, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .file-message {
            max-width: 300px;
        }

        .file-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .file-info {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .file-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
            display: block;
            margin-top: 8px;
            font-weight: 600;
        }

        .file-link:hover {
            text-decoration: underline;
        }

        .system-message {
            text-align: center;
            margin: 25px 0;
        }

        .system-bubble {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            display: inline-block;
            max-width: 80%;
            font-size: 14px;
            font-weight: 500;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* Модалка оплаты */
        .payment-modal .modal-content {
            max-width: 500px;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.98), rgba(42, 42, 42, 0.98));
            border: 2px solid var(--primary);
            box-shadow: 0 20px 60px rgba(255, 107, 157, 0.3);
        }

        .crypto-option {
            background: rgba(255, 107, 157, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 107, 157, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .crypto-option:hover {
            background: rgba(255, 107, 157, 0.1);
            border-color: var(--primary);
        }

        .crypto-option.selected {
            background: rgba(255, 107, 157, 0.15);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .crypto-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .crypto-icon {
            font-size: 24px;
        }

        .crypto-details h4 {
            margin-bottom: 5px;
            color: var(--text);
        }

        .crypto-details p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .wallet-address {
            background: rgba(255, 107, 157, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            border: 1px solid rgba(255, 107, 157, 0.1);
            font-family: monospace;
            word-break: break-all;
            display: none;
        }

        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .payment-success {
            text-align: center;
            padding: 40px 20px;
            display: none;
        }

        .success-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .payment-timer {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(102, 126, 234, 0.1));
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
        }

        .timer-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-display {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'Courier New', monospace;
        }

        .profile-info-payment {
            background: rgba(255, 107, 157, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 157, 0.1);
        }

        .profile-info-payment h4 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .profile-details {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .profile-detail {
            background: rgba(255, 107, 157, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            color: var(--primary);
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .filters-sidebar {
                width: 100%;
                left: -100%;
            }

            .vip-catalogs-grid {
                grid-template-columns: 1fr;
            }

            .vip-profiles-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .container {
                padding: 15px;
            }

            .logo {
                font-size: 3rem;
            }

            .header-stats {
                gap: 20px;
            }

            .stat-number {
                font-size: 1.5rem;
            }

            .stats-banner-content {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .chat-modal {
                height: 90%;
            }

            .slider-main {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .vip-profiles-grid {
                grid-template-columns: 1fr;
            }

            .card-actions {
                flex-direction: column;
            }

            .filter-actions {
                flex-direction: column;
            }

            .language-btn {
                padding: 10px 15px;
                font-size: 12px;
            }

            .filters-toggle {
                width: 50px;
                height: 50px;
            }

            .slider-main {
                height: 250px;
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--surface);
            border-top: 1px solid rgba(255, 107, 157, 0.2);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px;
            transition: all 0.3s ease;
            position: relative;
            text-decoration: none;
            color: var(--text-secondary);
        }

        .nav-item:hover {
            color: var(--primary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }

        .nav-badge {
            position: absolute;
            top: 5px;
            right: 50%;
            transform: translateX(10px);
            background: var(--primary);
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: 700;
            min-width: 18px;
            text-align: center;
        }

        /* Chats Page */
        .page {
            display: none;
            padding-bottom: 80px;
        }

        .page.active {
            display: block;
        }

        .chats-list {
            padding: 20px;
        }

        .chat-item {
            background: var(--card);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 107, 157, 0.1);
        }

        .chat-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 157, 0.3);
            border-color: var(--primary);
        }

        .chat-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .chat-info {
            flex: 1;
        }

        .chat-name {
            font-size: 16px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 5px;
        }

        .chat-last-message {
            font-size: 14px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .chat-unread {
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 18px;
            font-weight: 600;
        }

        /* Orders Page */
        .orders-list {
            padding: 20px;
        }

        .order-item {
            background: var(--card);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 107, 157, 0.1);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .order-status {
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
        }

        .order-status.paid {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }

        .order-status.unpaid {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .order-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .order-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .order-info {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .container {
            padding-bottom: 80px;
        }

        /* Плавающая кнопка Telegram бота */
        .telegram-bot-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #0088cc, #00a0dc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 136, 204, 0.5);
            z-index: 9999;
            transition: all 0.3s ease;
            border: none;
            animation: floatPulse 3s ease-in-out infinite;
        }

        .telegram-bot-btn:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 136, 204, 0.7);
        }

        .telegram-bot-btn:active {
            transform: scale(0.95);
        }

        .telegram-bot-btn svg {
            width: 32px;
            height: 32px;
            fill: white;
        }

        @keyframes floatPulse {
            0%, 100% {
                transform: translateY(0px);
                box-shadow: 0 4px 20px rgba(0, 136, 204, 0.5);
            }
            50% {
                transform: translateY(-10px);
                box-shadow: 0 8px 30px rgba(0, 136, 204, 0.7);
            }
        }

        /* Tooltip для кнопки */
        .telegram-bot-btn::before {
            content: attr(data-tooltip);
            position: absolute;
            right: 70px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .telegram-bot-btn:hover::before {
            opacity: 1;
        }

        /* Адаптивность для мобильных */
        @media (max-width: 768px) {
            .telegram-bot-btn {
                width: 56px;
                height: 56px;
                bottom: 80px;
                right: 16px;
            }

            .telegram-bot-btn svg {
                width: 28px;
                height: 28px;
            }
        }
    </style>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Muji">
    <meta name="theme-color" content="#ff6b9d">

    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="/icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/icon-76x76.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Анимированный фон -->
    <div class="background-animation"></div>

    <!-- Экран загрузки -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">Muji</div>
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loading-text">Loading premium experience...</div>
        </div>
    </div>

    <div class="container" id="main-content">
        <!-- Language Selector -->
        <div class="language-selector">
            <button class="language-btn" id="language-btn">
                <span id="language-text">EN</span>
            </button>
            <div class="language-dropdown" id="language-dropdown">
                <div class="language-option" data-lang="en">English</div>
                <div class="language-option" data-lang="ja">日本語</div>
                <div class="language-option" data-lang="ko">한국어</div>
                <div class="language-option" data-lang="zh">中文</div>
                <div class="language-option" data-lang="ar">العربية</div>
                <div class="language-option" data-lang="de">Deutsch</div>
                <div class="language-option" data-lang="es">Español</div>
                <div style="border-top: 1px solid rgba(255, 107, 157, 0.3); margin-top: 8px; padding-top: 8px;">
                    <div class="language-option" id="install-app-btn" onclick="showInstallPrompt(true)" style="color: #ff6b9d; font-weight: 600;">
                        📱 Добавить на экран
                    </div>
                </div>
            </div>
        </div>

        <!-- Кнопка фильтров -->
        <button class="filters-toggle" id="filters-toggle">
            <div class="filter-bar"></div>
            <div class="filter-bar"></div>
            <div class="filter-bar"></div>
        </button>

        <!-- Главный хедер -->
        <header class="main-header fade-in">
            <div class="header-content">
                <div class="logo">Muji</div>
                <div class="subtitle" id="app-subtitle">100% Anonymous Dating</div>

                <!-- Иконка незавершенной оплаты -->
                <div class="pending-payment-icon" id="pending-payment-icon" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span class="notification-badge">1</span>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="profiles-count">0</span>
                        <span class="stat-label" id="premium-profiles-label">Premium Profiles</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="online-count">0</span>
                        <span class="stat-label" id="online-now-label">Online Now</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">100%</span>
                        <span class="stat-label" id="anonymous-dating-label">Anonymous Dating</span>
                    </div>
                </div>

                <!-- Баннер под статистикой -->
                <div class="stats-banner" id="stats-banner">
                    <div class="stats-banner-content">
                        <span class="stats-banner-text" id="stats-banner-text"></span>
                        <a href="#" class="stats-banner-link" id="stats-banner-link" target="_blank"></a>
                        <button class="close-stats-banner" id="close-stats-banner">✕</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- VIP каталоги -->
        <section class="vip-catalogs" id="vip-catalogs">
            <div class="vip-catalogs-grid" id="vip-catalogs-grid">
                <!-- VIP каталоги будут загружены через JS -->
            </div>
        </section>

        <!-- Активные фильтры -->
        <div class="active-filters" id="active-filters"></div>

        <!-- Сетка карточек -->
        <div class="cards-grid" id="cards-container">
            <div class="loading" id="main-loading">
                <div style="font-size: 3rem; margin-bottom: 20px;"></div>
                Loading premium profiles...
            </div>
        </div>

        <!-- Кнопка загрузки еще -->
        <div class="loading" id="loading-more" style="display: none;">
            <div id="loading-more-text">Discovering more exclusive matches...</div>
        </div>
    </div>

    <!-- Боковое меню фильтров -->
    <div class="filters-overlay" id="filters-overlay"></div>
    <div class="filters-sidebar" id="filters-sidebar">
        <div class="filters-header">
            <h3 class="filters-title" id="filters-title">Filters</h3>
            <button class="close-btn" id="close-filters">✕</button>
        </div>

        <div class="filters-body">
            <!-- Город -->
            <div class="filter-group">
                <label id="filter-city-label">City</label>
                <div class="city-selector">
                    <select id="filter-city" class="modern-select">
                        <option value="all" id="all-cities">All cities</option>
                    </select>
                </div>
            </div>

            <!-- Национальность -->
            <div class="filter-group">
                <label id="filter-nationality-label">Nationality</label>
                <div class="city-selector">
                    <select id="filter-nationality" class="modern-select">
                        <option value="all" id="all-nationalities">All nationalities</option>
                    </select>
                </div>
            </div>

            <!-- Пол -->
            <div class="filter-group">
                <label id="filter-gender-label">Gender</label>
                <div class="city-selector">
                    <select id="filter-gender" class="modern-select">
                        <option value="all" id="all-genders">All genders</option>
                        <option value="female">Female</option>
                        <option value="male">Male</option>
                        <option value="transgender">Transgender</option>
                    </select>
                </div>
            </div>

            <!-- Город вылета -->
            <div class="filter-group">
                <label id="filter-travel-city-label">Travel City</label>
                <div class="city-selector">
                    <select id="filter-travel-city" class="modern-select">
                        <option value="all" id="all-travel-cities">All travel cities</option>
                    </select>
                </div>
            </div>

            <!-- Возраст -->
            <div class="filter-group">
                <label id="filter-age-label">Age</label>
                <div class="range-inputs">
                    <input type="number" id="filter-age-min" placeholder="18" min="18" max="70" value="18">
                    <span>-</span>
                    <input type="number" id="filter-age-max" placeholder="70" min="18" max="70" value="70">
                </div>
            </div>

            <!-- Рост -->
            <div class="filter-group">
                <label id="filter-height-label">Height (cm)</label>
                <div class="range-inputs">
                    <input type="number" id="filter-height-min" placeholder="120" min="120" max="220" value="120">
                    <span>-</span>
                    <input type="number" id="filter-height-max" placeholder="220" min="120" max="220" value="220">
                </div>
            </div>

            <!-- Вес -->
            <div class="filter-group">
                <label id="filter-weight-label">Weight (kg)</label>
                <div class="range-inputs">
                    <input type="number" id="filter-weight-min" placeholder="35" min="35" max="120" value="35">
                    <span>-</span>
                    <input type="number" id="filter-weight-max" placeholder="120" min="35" max="120" value="120">
                </div>
            </div>

            <!-- Грудь -->
            <div class="filter-group">
                <label id="filter-chest-label">Chest</label>
                <div class="range-inputs">
                    <input type="number" id="filter-chest-min" placeholder="1" min="1" max="12" value="1">
                    <span>-</span>
                    <input type="number" id="filter-chest-max" placeholder="12" min="1" max="12" value="12">
                </div>
            </div>

            <div class="filter-actions">
                <button class="btn btn-secondary" id="reset-filters">
                    <span id="reset-text">Reset</span>
                </button>
                <button class="btn btn-primary" id="apply-filters">
                    <span id="apply-text">Apply</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно профиля -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-profile-name">Profile Name</h2>
                <button class="close-btn" id="close-modal">✕</button>
            </div>
            <div class="modal-body">
                <!-- Слайдер фото -->
                <div class="slider" id="profile-slider">
                    <div class="slider-main" id="slider-main">
                        <!-- Фото будут добавлены через JS -->
                    </div>
                    <div class="slider-nav">
                        <button class="slider-btn" id="prev-slide">‹</button>
                        <button class="slider-btn" id="next-slide">›</button>
                    </div>
                    <div class="slider-thumbs" id="slider-thumbs"></div>
                </div>

                <div class="profile-stats-modal">
                    <div class="stat-badge"><span id="modal-profile-age">25</span> <span id="years-text">years</span></div>
                    <div class="stat-badge"><span id="modal-profile-height">170</span> <span id="cm-text">cm</span></div>
                    <div class="stat-badge"><span id="modal-profile-weight">55</span> <span id="kg-text">kg</span></div>
                    <div class="stat-badge"><span id="modal-profile-chest">3</span> chest</div>
                </div>

                <div class="profile-info">
                    <div class="info-item">
                        <span class="info-icon" id="label-gender">Gender:</span>
                        <span id="modal-profile-gender"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon" id="label-city">City:</span>
                        <span id="modal-profile-city"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon" id="label-nationality">Nationality:</span>
                        <span id="modal-profile-nationality"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon" id="label-travel-cities">Travel Cities:</span>
                        <span id="modal-profile-travel-cities"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon" id="label-description">Description:</span>
                        <span id="modal-profile-description"> </span>
                    </div>
                </div>

                <!-- Комментарии -->
                <div class="comments-section">
                    <h3 class="comments-title" id="comments-title">Comments</h3>

                    <!-- Форма добавления комментария -->
                    <div class="comment-form" id="comment-form">
                        <textarea class="comment-input" id="comment-input" placeholder="Your comment..."></textarea>
                        <button class="btn btn-primary" id="post-comment-btn">
                            <span id="post-comment-text">Post Comment</span>
                        </button>
                    </div>

                    <!-- Сообщение о необходимости транзакции -->
                    <div class="comment-permission-required" id="comment-permission-required">
                        <div class="comment-permission-text" id="comment-permission-text">
                            To leave comments, you need to use our services first
                        </div>
                        <button class="btn btn-primary" onclick="openPaymentModal()">
                            <span id="complete-transaction-text">Complete Transaction</span>
                        </button>
                    </div>

                    <!-- Список комментариев -->
                    <div class="comments-list" id="comments-list">
                        <div class="no-comments" id="no-comments">No comments yet</div>
                    </div>
                </div>

                <div class="card-actions">
                    <button class="btn btn-primary" id="write-btn">
                        <span id="write-text">Write Message</span>
                    </button>
                    <button class="btn btn-pay" id="pay-btn">
                        <span id="pay-text">Book with Crypto</span>
                    </button>
                    <button class="btn btn-promo" id="promo-btn">
                        <span id="promo-text">Use Promo Code</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно промокода -->
    <div class="modal promo-modal" id="promo-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Promo Code</h2>
                <button class="close-btn" id="close-promo">✕</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);" id="promo-description">
                    Enter your promo code to get a special discount
                </p>
                <div class="promo-input-group">
                    <input type="text" class="promo-input" id="promo-input" placeholder="Enter promo code">
                    <button class="btn btn-primary" id="apply-promo">
                        <span id="apply-promo-text">Apply</span>
                    </button>
                </div>
                <div class="promo-result" id="promo-result"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" id="close-promo-btn">
                        <span id="close-promo-text">Close</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно оплаты -->
    <div class="modal payment-modal" id="payment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Crypto Payment</h2>
                <button class="close-btn" id="close-payment">✕</button>
            </div>
            <div class="modal-body" id="payment-body">
                <div id="payment-selection">
                    <!-- Информация о профиле -->
                    <div class="profile-info-payment">
                        <h4 id="payment-profile-title">Booking Profile</h4>
                        <div class="profile-details">
                            <span class="profile-detail" id="payment-profile-name">Name: </span>
                            <span class="profile-detail" id="payment-profile-age">Age: </span>
                            <span class="profile-detail" id="payment-profile-gender">Gender: </span>
                            <span class="profile-detail" id="payment-profile-city">City: </span>
                        </div>
                    </div>

                    <p style="margin-bottom: 20px; color: var(--text-secondary);" id="payment-description">Select cryptocurrency and enter amount</p>

                    <div class="form-group">
                        <label id="payment-amount-label">Amount (USD)</label>
                        <input type="number" id="payment-amount" class="modern-select" placeholder="100" min="10" value="100">
                    </div>

                    <div class="crypto-option" data-crypto="trc20">
                        <div class="crypto-info">
                            <div class="crypto-icon">₿</div>
                            <div class="crypto-details">
                                <h4>USDT (TRC20)</h4>
                                <p>Fast transactions, low fees</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="erc20">
                        <div class="crypto-info">
                            <div class="crypto-icon">Ξ</div>
                            <div class="crypto-details">
                                <h4>USDT (ERC20)</h4>
                                <p>Ethereum network</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="bnb">
                        <div class="crypto-info">
                            <div class="crypto-icon">◆</div>
                            <div class="crypto-details">
                                <h4>BNB (BEP20)</h4>
                                <p>Binance Smart Chain</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="btc">
                        <div class="crypto-info">
                            <div class="crypto-icon">₿</div>
                            <div class="crypto-details">
                                <h4>Bitcoin (BTC)</h4>
                                <p>Original cryptocurrency</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="zetcash">
                        <div class="crypto-info">
                            <div class="crypto-icon">Ƶ</div>
                            <div class="crypto-details">
                                <h4>ZetCash</h4>
                                <p>Privacy focused</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="doge">
                        <div class="crypto-info">
                            <div class="crypto-icon">Ð</div>
                            <div class="crypto-details">
                                <h4>Dogecoin (DOGE)</h4>
                                <p>Much wow, very coin</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="dash">
                        <div class="crypto-info">
                            <div class="crypto-icon">Đ</div>
                            <div class="crypto-details">
                                <h4>Dash (DASH)</h4>
                                <p>Digital cash</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="ltc">
                        <div class="crypto-info">
                            <div class="crypto-icon">Ł</div>
                            <div class="crypto-details">
                                <h4>Litecoin (LTC)</h4>
                                <p>Silver to Bitcoin's gold</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="usdt_bep20">
                        <div class="crypto-info">
                            <div class="crypto-icon">₮</div>
                            <div class="crypto-details">
                                <h4>USDT (BEP20)</h4>
                                <p>Binance Smart Chain</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="eth">
                        <div class="crypto-info">
                            <div class="crypto-icon">Ξ</div>
                            <div class="crypto-details">
                                <h4>Ethereum (ETH)</h4>
                                <p>Smart contract platform</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="usdc_erc20">
                        <div class="crypto-info">
                            <div class="crypto-icon">$</div>
                            <div class="crypto-details">
                                <h4>USDC (ERC20)</h4>
                                <p>USD stablecoin</p>
                            </div>
                        </div>
                    </div>

                    <div style="padding: 15px; background: rgba(255, 107, 157, 0.1); border-radius: 12px; margin: 15px 0; text-align: center;">
                        <span style="color: var(--primary); font-weight: 600;">🎁 +5% Bonus on all deposits!</span>
                    </div>

                    <button class="btn btn-primary" id="confirm-payment" style="width: 100%; margin-top: 20px;">
                        <span id="confirm-payment-text">Pay</span>
                    </button>
                </div>

                <div class="payment-success" id="payment-success">
                    <div class="success-icon">⏳</div>
                    <h3 id="payment-success-title">Awaiting Confirmation</h3>
                    <p id="payment-success-message">Processing payment... Close the window, you will receive a notification in chat.</p>

                    <div class="wallet-address" id="wallet-address" style="margin: 20px 0;">
                        <strong id="wallet-address-label">Wallet Address:</strong>
                        <div id="address-text" style="margin: 10px 0; word-break: break-all; background: rgba(255,107,157,0.1); padding: 15px; border-radius: 8px; font-size: 14px;"></div>
                        <button class="copy-btn" id="copy-address" style="margin-top: 10px;">Copy Address</button>
                    </div>

                    <div class="payment-timer">
                        <div class="timer-label" id="timer-label">Time remaining:</div>
                        <div class="timer-display" id="timer-display">60:00</div>
                    </div>
                    <button class="btn btn-primary" id="close-success">
                        <span id="close-success-text">Close</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно чата -->
    <div class="chat-modal" id="chat-modal">
        <div class="chat-header">
            <h3 class="chat-title">
                <img src="" alt="Profile" class="chat-avatar" id="chat-avatar">
                <span id="chat-title-text">Chat with ...</span>
            </h3>
            <button class="close-btn" id="close-chat">✕</button>
        </div>
        <div class="chat-warning" id="chat-warning"></div>
        <div class="chat-body" id="chat-body"></div>
        <div class="chat-footer">
            <input type="file" class="file-input" id="file-input" accept="image/*,video/*,.pdf,.doc,.docx">
            <button class="file-btn" id="file-btn">
                <span id="attach-file-text">📎</span>
            </button>
            <div class="chat-input-container">
                <textarea class="chat-input" id="chat-input" placeholder="Type a message..." rows="1"></textarea>
            </div>
            <button class="chat-send" id="chat-send">➤</button>
        </div>
    </div>

    <!-- Pages Container -->
    <div id="pages-container">
        <!-- Home/Profiles Page -->
        <div id="home-page" class="page active">
            <!-- Main content already here -->
        </div>

        <!-- Chats Page -->
        <div id="chats-page" class="page">
            <header class="main-header">
                <h2 style="color: var(--primary); font-size: 24px; font-weight: 700;">My Chats</h2>
            </header>
            <div class="chats-list" id="chats-list-container"></div>
        </div>

        <!-- Booked Orders Page -->
        <div id="paid-orders-page" class="page">
            <header class="main-header">
                <h2 style="color: #28a745; font-size: 24px; font-weight: 700;">Booked Orders</h2>
            </header>
            <div class="orders-list" id="paid-orders-list"></div>
        </div>

        <!-- Pending Orders Page -->
        <div id="unpaid-orders-page" class="page">
            <header class="main-header">
                <h2 style="color: #ffc107; font-size: 24px; font-weight: 700;">Pending Orders</h2>
            </header>
            <div class="orders-list" id="unpaid-orders-list"></div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('home')">
            <div class="nav-label" id="nav-home-label">Home</div>
        </div>
        <div class="nav-item" onclick="switchPage('chats')">
            <div class="nav-label" id="nav-chats-label">Chats</div>
            <div class="nav-badge" id="chats-badge" style="display: none;">0</div>
        </div>
        <div class="nav-item" onclick="switchPage('paid')">
            <div class="nav-label" id="nav-paid-label">Booked</div>
        </div>
        <div class="nav-item" onclick="switchPage('unpaid')">
            <div class="nav-label" id="nav-unpaid-label">Pending</div>
            <div class="nav-badge" id="unpaid-badge" style="display: none;">0</div>
        </div>
    </div>

    <script>
        // ==================== TELEGRAM WEB APP ====================
        let tg = null;
        let telegramUser = null;

        if (window.Telegram && window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();
            tg.enableClosingConfirmation();

            // Получаем данные пользователя
            telegramUser = tg.initDataUnsafe?.user;

            // Устанавливаем тему
            if (tg.themeParams) {
                document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#0f0f0f');
                document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#ffffff');
            }

            console.log('Telegram Web App initialized', telegramUser);
        }

        // ==================== PWA INSTALLATION ====================
        let deferredPrompt;
        let isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        let isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;

        // Обработчик события установки PWA
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;

            // Автоматический показ баннера отключен
            // Пользователь может вручную установить приложение через меню языков
        });

        function showInstallPrompt(force = false) {
            if (isStandalone && !force) {
                // Если уже установлено, показываем сообщение
                alert('Приложение уже установлено на вашем устройстве!');
                return;
            }

            // Закрываем dropdown языков если он открыт
            const languageDropdown = document.getElementById('language-dropdown');
            if (languageDropdown) languageDropdown.classList.remove('active');

            // Проверяем показывали ли баннер недавно (только для автоматического показа)
            if (!force) {
                const lastShown = localStorage.getItem('installPromptLastShown');
                const now = Date.now();
                if (lastShown && (now - parseInt(lastShown)) < 24 * 60 * 60 * 1000) {
                    return; // Показывали менее 24 часов назад
                }
            }

            // Удаляем старый баннер если есть
            const existingBanner = document.getElementById('install-banner');
            if (existingBanner) existingBanner.remove();

            const banner = document.createElement('div');
            banner.id = 'install-banner';
            banner.innerHTML = `
                <div style="position: fixed; bottom: 20px; left: 20px; right: 20px; background: linear-gradient(135deg, #ff6b9d, #667eea); padding: 18px 20px; border-radius: 20px; color: white; z-index: 10000; box-shadow: 0 10px 40px rgba(255, 107, 157, 0.6); display: flex; align-items: center; gap: 12px; animation: slideUp 0.6s ease, pulse 2s ease-in-out infinite; backdrop-filter: blur(10px);">
                    <div style="font-size: 28px;">📱</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 700; font-size: 16px; margin-bottom: 4px;">Добавить на домашний экран</div>
                        <div style="font-size: 13px; opacity: 0.9;">Быстрый доступ к приложению</div>
                    </div>
                    <button onclick="installPWA()" style="background: white; color: #ff6b9d; border: none; padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: 700; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s;">Установить</button>
                    <button onclick="closeInstallBanner()" style="background: transparent; border: none; color: white; padding: 8px; cursor: pointer; font-size: 20px; opacity: 0.7; transition: opacity 0.3s;">✕</button>
                </div>
            `;
            document.body.appendChild(banner);

            if (!force) {
                localStorage.setItem('installPromptLastShown', Date.now().toString());
            }
        }

        async function installPWA() {
            if (isIOS) {
                showIOSInstructions();
                return;
            }

            if (!deferredPrompt) return;

            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            console.log('Install outcome:', outcome);
            deferredPrompt = null;
            closeInstallBanner();
        }

        function showIOSInstructions() {
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 10001; padding: 20px;';
            modal.innerHTML = `
                <div style="background: #1a1a1a; border-radius: 20px; padding: 30px; max-width: 400px; text-align: center; border: 1px solid #ff6b9d;">
                    <h3 style="color: #ff6b9d; margin-bottom: 20px; font-size: 20px;">Установка на iPhone</h3>
                    <ol style="text-align: left; color: white; line-height: 2; padding-left: 20px;">
                        <li>Нажмите кнопку "Поделиться" <span style="font-size: 24px;">⎋</span></li>
                        <li>Выберите "На экран Домой" <span style="font-size: 24px;">➕</span></li>
                        <li>Нажмите "Добавить"</li>
                    </ol>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: linear-gradient(135deg, #ff6b9d, #667eea); color: white; border: none; padding: 12px 24px; border-radius: 12px; margin-top: 20px; cursor: pointer; font-weight: 600;">Понятно</button>
                </div>
            `;
            document.body.appendChild(modal);
            closeInstallBanner();
        }

        function closeInstallBanner() {
            const banner = document.getElementById('install-banner');
            if (banner) banner.remove();
        }

        // Автоматический показ промпта для iOS отключен
        // Пользователь может вручную установить приложение через меню языков

        // ==================== ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ====================
        // Глобальные переменные
        let currentProfiles = [];
        let currentPage = 0;
        let isLoading = false;
        let currentProfile = null;
        let currentSlideIndex = 0;
        const profilesPerPage = 12;
        let onlineCount = 0;
        let onlineUpdateInterval = null;

        // Переменные для авто-обновления чата
        let chatUpdateInterval = null;
        let lastMessageId = 0;
        let canComment = false; // Может ли пользователь оставлять комментарии

        // VIP каталоги
        let vipCatalogs = {};

        // Фильтры
        let currentFilters = {
            city: 'all',
            nationality: 'all',
            travel_city: 'all',
            gender: 'all',
            age_min: 18,
            age_max: 70,
            height_min: 120,
            height_max: 220,
            weight_min: 35,
            weight_max: 120,
            chest_min: 1,
            chest_max: 12
        };

        // Текущий язык
        let currentLanguage = 'en';

        // Все переводы
        const allTranslations = {
            en: {
                subtitle: "100% Anonymous Dating",
                premium_profiles: "Premium Profiles",
                online_now: "Online Now",
                anonymous_dating: "Anonymous Dating",
                filters: "Filters",
                city: "City",
                all_cities: "All Cities",
                nationality: "Nationality",
                all_nationalities: "All Nationalities",
                gender: "Gender",
                all_genders: "All",
                travel_city: "Travel City",
                age: "Age",
                height: "Height (cm)",
                weight: "Weight (kg)",
                chest: "Chest",
                reset: "Reset",
                apply: "Apply",
                loading: "Loading...",
                loading_more: "Loading more...",
                view_profile: "More",
                write_message: "Write",
                book_with_crypto: "Pay",
                promocode: "Promo",
                years: "years",
                cm: "cm",
                kg: "kg",
                chest_size: "chest",
                apply_promocode: "Apply",
                close: "Close",
                error_sending: "Error sending message",
                enter_promocode: "Enter promocode to get discount",
                comments: "Comments",
                post_comment: "Post Comment",
                no_comments: "No comments yet",
                your_comment: "Your comment...",
                pay_now: "Confirm Payment",
                amount: "Amount:",
                select_crypto: "Select cryptocurrency:",
                wallet_address: "Wallet Address:",
                booking_profile: "Booking Profile:",
                payment_awaiting: "Payment Processing",
                payment_processing: "Your payment is being processed. Please wait...",
                timer_label: "Time remaining",
                chat_with: "Chat with",
                attach_file: "📎",
                comment_permission_required: "Payment required",
                complete_transaction_to_comment: "Complete payment to leave comments",
                type_message: "Type a message...",
                chat_warning: "Do not share contacts from other messengers. This is for the model's safety.",
                female: "Female",
                male: "Male",
                transgender: "Transgender",
                description: "Description",
                vip_catalog: "VIP Catalog",
                extra_vip: "Extra VIP",
                secret_catalog: "Secret Catalog",
                label_gender: "Gender:",
                label_city: "City:",
                label_nationality: "Nationality:",
                label_travel_cities: "Travel Cities:",
                label_description: "Description:"
            },
            es: {
                subtitle: "100% Citas Anónimas",
                premium_profiles: "Perfiles Premium",
                online_now: "En línea ahora",
                anonymous_dating: "Citas Anónimas",
                filters: "Filtros",
                city: "Ciudad",
                all_cities: "Todas las ciudades",
                nationality: "Nacionalidad",
                all_nationalities: "Todas las nacionalidades",
                gender: "Género",
                all_genders: "Todos",
                travel_city: "Ciudad de viaje",
                age: "Edad",
                height: "Altura (cm)",
                weight: "Peso (kg)",
                chest: "Pecho",
                reset: "Restablecer",
                apply: "Aplicar",
                loading: "Cargando...",
                loading_more: "Cargando más...",
                view_profile: "Más",
                write_message: "Escribir",
                book_with_crypto: "Pagar",
                promocode: "Código promocional",
                years: "años",
                cm: "cm",
                kg: "kg",
                chest_size: "pecho",
                apply_promocode: "Aplicar",
                close: "Cerrar",
                error_sending: "Error al enviar mensaje",
                enter_promocode: "Ingrese el código promocional para obtener descuento",
                comments: "Comentarios",
                post_comment: "Publicar comentario",
                no_comments: "Aún no hay comentarios",
                your_comment: "Tu comentario...",
                pay_now: "Confirmar pago",
                amount: "Cantidad:",
                select_crypto: "Selecciona criptomoneda:",
                wallet_address: "Dirección de billetera:",
                booking_profile: "Reserva de perfil:",
                payment_awaiting: "Procesando pago",
                payment_processing: "Tu pago está siendo procesado. Por favor espera...",
                timer_label: "Tiempo restante",
                chat_with: "Chat con",
                attach_file: "📎",
                comment_permission_required: "Pago requerido",
                complete_transaction_to_comment: "Completa el pago para dejar comentarios",
                type_message: "Escribe un mensaje...",
                chat_warning: "No compartas contactos de otros mensajeros. Esto es para la seguridad del modelo.",
                female: "Mujer",
                male: "Hombre",
                transgender: "Transgénero",
                description: "Descripción",
                vip_catalog: "Catálogo VIP",
                extra_vip: "Extra VIP",
                secret_catalog: "Catálogo Secreto",
                label_gender: "Género:",
                label_city: "Ciudad:",
                label_nationality: "Nacionalidad:",
                label_travel_cities: "Ciudades de viaje:",
                label_description: "Descripción:"
            },
            ar: {
                subtitle: "مواعدة مجهولة 100%",
                premium_profiles: "ملفات تعريف مميزة",
                online_now: "متصل الآن",
                anonymous_dating: "مواعدة مجهولة",
                filters: "المرشحات",
                city: "المدينة",
                all_cities: "كل المدن",
                nationality: "الجنسية",
                all_nationalities: "كل الجنسيات",
                gender: "الجنس",
                all_genders: "الكل",
                travel_city: "مدينة السفر",
                age: "العمر",
                height: "الطول (سم)",
                weight: "الوزن (كجم)",
                chest: "الصدر",
                reset: "إعادة تعيين",
                apply: "تطبيق",
                loading: "جاري التحميل...",
                loading_more: "تحميل المزيد...",
                view_profile: "المزيد",
                write_message: "كتابة",
                book_with_crypto: "الدفع",
                promocode: "رمز ترويجي",
                years: "سنة",
                cm: "سم",
                kg: "كجم",
                chest_size: "صدر",
                apply_promocode: "تطبيق",
                close: "إغلاق",
                error_sending: "خطأ في إرسال الرسالة",
                enter_promocode: "أدخل الرمز الترويجي للحصول على خصم",
                comments: "التعليقات",
                post_comment: "نشر تعليق",
                no_comments: "لا توجد تعليقات بعد",
                your_comment: "تعليقك...",
                pay_now: "تأكيد الدفع",
                amount: "المبلغ:",
                select_crypto: "اختر العملة المشفرة:",
                wallet_address: "عنوان المحفظة:",
                booking_profile: "حجز الملف الشخصي:",
                payment_awaiting: "معالجة الدفع",
                payment_processing: "جاري معالجة دفعتك. يرجى الانتظار...",
                timer_label: "الوقت المتبقي",
                chat_with: "الدردشة مع",
                attach_file: "📎",
                comment_permission_required: "الدفع مطلوب",
                complete_transaction_to_comment: "أكمل الدفع لترك التعليقات",
                type_message: "اكتب رسالة...",
                chat_warning: "لا تشارك جهات الاتصال من تطبيقات المراسلة الأخرى. هذا من أجل سلامة النموذج.",
                female: "أنثى",
                male: "ذكر",
                transgender: "متحول جنسياً",
                description: "الوصف",
                vip_catalog: "كتالوج VIP",
                extra_vip: "Extra VIP",
                secret_catalog: "كتالوج سري",
                label_gender: ":الجنس",
                label_city: ":المدينة",
                label_nationality: ":الجنسية",
                label_travel_cities: ":مدن السفر",
                label_description: ":الوصف"
            },
            de: {
                subtitle: "100% Anonymes Dating",
                premium_profiles: "Premium-Profile",
                online_now: "Jetzt online",
                anonymous_dating: "Anonymes Dating",
                filters: "Filter",
                city: "Stadt",
                all_cities: "Alle Städte",
                nationality: "Nationalität",
                all_nationalities: "Alle Nationalitäten",
                gender: "Geschlecht",
                all_genders: "Alle",
                travel_city: "Reisestadt",
                age: "Alter",
                height: "Größe (cm)",
                weight: "Gewicht (kg)",
                chest: "Brust",
                reset: "Zurücksetzen",
                apply: "Anwenden",
                loading: "Wird geladen...",
                loading_more: "Mehr laden...",
                view_profile: "Mehr",
                write_message: "Schreiben",
                book_with_crypto: "Bezahlen",
                promocode: "Promocode",
                years: "Jahre",
                cm: "cm",
                kg: "kg",
                chest_size: "Brust",
                apply_promocode: "Anwenden",
                close: "Schließen",
                error_sending: "Fehler beim Senden der Nachricht",
                enter_promocode: "Promocode eingeben für Rabatt",
                comments: "Kommentare",
                post_comment: "Kommentar posten",
                no_comments: "Noch keine Kommentare",
                your_comment: "Dein Kommentar...",
                pay_now: "Zahlung bestätigen",
                amount: "Betrag:",
                select_crypto: "Kryptowährung auswählen:",
                wallet_address: "Wallet-Adresse:",
                booking_profile: "Profil buchen:",
                payment_awaiting: "Zahlungsabwicklung",
                payment_processing: "Deine Zahlung wird bearbeitet. Bitte warten...",
                timer_label: "Verbleibende Zeit",
                chat_with: "Chat mit",
                attach_file: "📎",
                comment_permission_required: "Zahlung erforderlich",
                complete_transaction_to_comment: "Schließe die Zahlung ab, um Kommentare zu hinterlassen",
                type_message: "Nachricht eingeben...",
                chat_warning: "Teilen Sie keine Kontakte aus anderen Messengern. Dies dient der Sicherheit des Modells.",
                female: "Weiblich",
                male: "Männlich",
                transgender: "Transgender",
                description: "Beschreibung",
                vip_catalog: "VIP-Katalog",
                extra_vip: "Extra VIP",
                secret_catalog: "Geheimer Katalog",
                label_gender: "Geschlecht:",
                label_city: "Stadt:",
                label_nationality: "Nationalität:",
                label_travel_cities: "Reisestädte:",
                label_description: "Beschreibung:"
            },
            ja: {
                subtitle: "100% 匿名デート",
                premium_profiles: "プレミアムプロフィール",
                online_now: "オンライン中",
                anonymous_dating: "匿名デート",
                filters: "フィルター",
                city: "都市",
                all_cities: "すべての都市",
                nationality: "国籍",
                all_nationalities: "すべての国籍",
                gender: "性別",
                all_genders: "すべて",
                travel_city: "旅行先の都市",
                age: "年齢",
                height: "身長 (cm)",
                weight: "体重 (kg)",
                chest: "バスト",
                reset: "リセット",
                apply: "適用",
                loading: "読み込み中...",
                loading_more: "さらに読み込み中...",
                view_profile: "もっと見る",
                write_message: "メッセージ",
                book_with_crypto: "支払い",
                promocode: "プロモコード",
                years: "歳",
                cm: "cm",
                kg: "kg",
                chest_size: "バスト",
                apply_promocode: "適用",
                close: "閉じる",
                error_sending: "メッセージ送信エラー",
                enter_promocode: "割引のためプロモコードを入力",
                comments: "コメント",
                post_comment: "コメントを投稿",
                no_comments: "まだコメントはありません",
                your_comment: "あなたのコメント...",
                pay_now: "支払いを確認",
                amount: "金額:",
                select_crypto: "暗号通貨を選択:",
                wallet_address: "ウォレットアドレス:",
                booking_profile: "プロフィール予約:",
                payment_awaiting: "支払い処理中",
                payment_processing: "お支払いを処理しています。お待ちください...",
                timer_label: "残り時間",
                chat_with: "チャット",
                attach_file: "📎",
                comment_permission_required: "支払いが必要",
                complete_transaction_to_comment: "コメントを残すには支払いを完了してください",
                type_message: "メッセージを入力...",
                chat_warning: "他のメッセンジャーの連絡先を共有しないでください。これはモデルの安全のためです。",
                female: "女性",
                male: "男性",
                transgender: "トランスジェンダー",
                description: "説明",
                vip_catalog: "VIPカタログ",
                extra_vip: "エクストラVIP",
                secret_catalog: "シークレットカタログ",
                label_gender: "性別:",
                label_city: "都市:",
                label_nationality: "国籍:",
                label_travel_cities: "旅行先:",
                label_description: "説明:"
            },
            ko: {
                subtitle: "100% 익명 데이트",
                premium_profiles: "프리미엄 프로필",
                online_now: "온라인 중",
                anonymous_dating: "익명 데이트",
                filters: "필터",
                city: "도시",
                all_cities: "모든 도시",
                nationality: "국적",
                all_nationalities: "모든 국적",
                gender: "성별",
                all_genders: "모두",
                travel_city: "여행 도시",
                age: "나이",
                height: "키 (cm)",
                weight: "몸무게 (kg)",
                chest: "가슴",
                reset: "초기화",
                apply: "적용",
                loading: "로딩 중...",
                loading_more: "더 로딩 중...",
                view_profile: "더보기",
                write_message: "메시지",
                book_with_crypto: "결제",
                promocode: "프로모션 코드",
                years: "세",
                cm: "cm",
                kg: "kg",
                chest_size: "가슴",
                apply_promocode: "적용",
                close: "닫기",
                error_sending: "메시지 전송 오류",
                enter_promocode: "할인을 받으려면 프로모션 코드 입력",
                comments: "댓글",
                post_comment: "댓글 게시",
                no_comments: "아직 댓글이 없습니다",
                your_comment: "댓글을 입력하세요...",
                pay_now: "결제 확인",
                amount: "금액:",
                select_crypto: "암호화폐 선택:",
                wallet_address: "지갑 주소:",
                booking_profile: "프로필 예약:",
                payment_awaiting: "결제 처리 중",
                payment_processing: "결제가 처리 중입니다. 기다려 주세요...",
                timer_label: "남은 시간",
                chat_with: "채팅",
                attach_file: "📎",
                comment_permission_required: "결제 필요",
                complete_transaction_to_comment: "댓글을 남기려면 결제를 완료하세요",
                type_message: "메시지 입력...",
                chat_warning: "다른 메신저의 연락처를 공유하지 마세요. 이것은 모델의 안전을 위한 것입니다.",
                female: "여성",
                male: "남성",
                transgender: "트랜스젠더",
                description: "설명",
                vip_catalog: "VIP 카탈로그",
                extra_vip: "엑스트라 VIP",
                secret_catalog: "시크릿 카탈로그",
                label_gender: "성별:",
                label_city: "도시:",
                label_nationality: "국적:",
                label_travel_cities: "여행 도시:",
                label_description: "설명:"
            },
            zh: {
                subtitle: "100% 匿名约会",
                premium_profiles: "高级档案",
                online_now: "在线",
                anonymous_dating: "匿名约会",
                filters: "过滤器",
                city: "城市",
                all_cities: "所有城市",
                nationality: "国籍",
                all_nationalities: "所有国籍",
                gender: "性别",
                all_genders: "全部",
                travel_city: "旅行城市",
                age: "年龄",
                height: "身高 (厘米)",
                weight: "体重 (公斤)",
                chest: "胸围",
                reset: "重置",
                apply: "应用",
                loading: "加载中...",
                loading_more: "加载更多...",
                view_profile: "更多",
                write_message: "写信",
                book_with_crypto: "支付",
                promocode: "促销代码",
                years: "岁",
                cm: "厘米",
                kg: "公斤",
                chest_size: "胸围",
                apply_promocode: "应用",
                close: "关闭",
                error_sending: "发送消息时出错",
                enter_promocode: "输入促销代码获得折扣",
                comments: "评论",
                post_comment: "发表评论",
                no_comments: "还没有评论",
                your_comment: "你的评论...",
                pay_now: "确认付款",
                amount: "金额:",
                select_crypto: "选择加密货币:",
                wallet_address: "钱包地址:",
                booking_profile: "预订档案:",
                payment_awaiting: "处理付款",
                payment_processing: "您的付款正在处理中。请稍候...",
                timer_label: "剩余时间",
                chat_with: "聊天",
                attach_file: "📎",
                comment_permission_required: "需要付款",
                complete_transaction_to_comment: "完成付款以留下评论",
                type_message: "输入消息...",
                chat_warning: "请勿分享其他通讯软件的联系方式。这是为了模特的安全。",
                female: "女性",
                male: "男性",
                transgender: "跨性别",
                description: "描述",
                vip_catalog: "VIP目录",
                extra_vip: "特级VIP",
                secret_catalog: "秘密目录",
                label_gender: "性别:",
                label_city: "城市:",
                label_nationality: "国籍:",
                label_travel_cities: "旅行城市:",
                label_description: "描述:"
            }
        };

        let translations = allTranslations[currentLanguage];

        // Элементы DOM
        const loadingScreen = document.getElementById('loading-screen');
        const mainContent = document.getElementById('main-content');
        const vipCatalogsSection = document.getElementById('vip-catalogs');
        const vipCatalogsGrid = document.getElementById('vip-catalogs-grid');
        const cardsContainer = document.getElementById('cards-container');
        const loadingMore = document.getElementById('loading-more');
        const profileModal = document.getElementById('profile-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const modalProfileName = document.getElementById('modal-profile-name');
        const modalProfileAge = document.getElementById('modal-profile-age');
        const modalProfileHeight = document.getElementById('modal-profile-height');
        const modalProfileWeight = document.getElementById('modal-profile-weight');
        const modalProfileChest = document.getElementById('modal-profile-chest');
        const modalProfileGender = document.getElementById('modal-profile-gender');
        const modalProfileCity = document.getElementById('modal-profile-city');
        const modalProfileNationality = document.getElementById('modal-profile-nationality');
        const modalProfileTravelCities = document.getElementById('modal-profile-travel-cities');
        const modalProfileDescription = document.getElementById('modal-profile-description');
        const writeBtn = document.getElementById('write-btn');
        const payBtn = document.getElementById('pay-btn');
        const promoBtn = document.getElementById('promo-btn');
        const chatModal = document.getElementById('chat-modal');
        const closeChatBtn = document.getElementById('close-chat');
        const chatBody = document.getElementById('chat-body');
        const chatInput = document.getElementById('chat-input');
        const chatSendBtn = document.getElementById('chat-send');
        const chatTitle = document.getElementById('chat-title-text');
        const chatAvatar = document.getElementById('chat-avatar');
        const fileInput = document.getElementById('file-input');
        const fileBtn = document.getElementById('file-btn');
        const promoModal = document.getElementById('promo-modal');
        const promoInput = document.getElementById('promo-input');
        const applyPromoBtn = document.getElementById('apply-promo');
        const promoResult = document.getElementById('promo-result');
        const closePromoBtn = document.getElementById('close-promo');
        const closePromoBtn2 = document.getElementById('close-promo-btn');
        const paymentModal = document.getElementById('payment-modal');
        const closePaymentBtn = document.getElementById('close-payment');
        const paymentAmount = document.getElementById('payment-amount');
        const walletAddress = document.getElementById('wallet-address');
        const addressText = document.getElementById('address-text');
        const copyAddressBtn = document.getElementById('copy-address');
        const confirmPaymentBtn = document.getElementById('confirm-payment');
        const paymentSuccess = document.getElementById('payment-success');
        const closeSuccessBtn = document.getElementById('close-success');
        const cryptoOptions = document.querySelectorAll('.crypto-option');
        const commentForm = document.getElementById('comment-form');
        const commentInput = document.getElementById('comment-input');
        const postCommentBtn = document.getElementById('post-comment-btn');
        const commentsList = document.getElementById('comments-list');
        const noComments = document.getElementById('no-comments');
        const commentPermissionRequired = document.getElementById('comment-permission-required');
        const commentPermissionText = document.getElementById('comment-permission-text');

        // Элементы слайдера
        const sliderMain = document.getElementById('slider-main');
        const sliderThumbs = document.getElementById('slider-thumbs');
        const prevSlideBtn = document.getElementById('prev-slide');
        const nextSlideBtn = document.getElementById('next-slide');

        // Элементы фильтров
        const filtersToggle = document.getElementById('filters-toggle');
        const filtersSidebar = document.getElementById('filters-sidebar');
        const filtersOverlay = document.getElementById('filters-overlay');
        const closeFiltersBtn = document.getElementById('close-filters');
        const filterCity = document.getElementById('filter-city');
        const filterNationality = document.getElementById('filter-nationality');
        const filterGender = document.getElementById('filter-gender');
        const filterTravelCity = document.getElementById('filter-travel-city');
        const filterAgeMin = document.getElementById('filter-age-min');
        const filterAgeMax = document.getElementById('filter-age-max');
        const filterHeightMin = document.getElementById('filter-height-min');
        const filterHeightMax = document.getElementById('filter-height-max');
        const filterWeightMin = document.getElementById('filter-weight-min');
        const filterWeightMax = document.getElementById('filter-weight-max');
        const filterChestMin = document.getElementById('filter-chest-min');
        const filterChestMax = document.getElementById('filter-chest-max');
        const resetFiltersBtn = document.getElementById('reset-filters');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const activeFilters = document.getElementById('active-filters');

        // Language Selector
        const languageBtn = document.getElementById('language-btn');
        const languageDropdown = document.getElementById('language-dropdown');
        const languageText = document.getElementById('language-text');

        // Баннер под статистикой
        const statsBanner = document.getElementById('stats-banner');
        const statsBannerText = document.getElementById('stats-banner-text');
        const statsBannerLink = document.getElementById('stats-banner-link');
        const closeStatsBanner = document.getElementById('close-stats-banner');

        // Элементы оплаты
        const paymentProfileName = document.getElementById('payment-profile-name');
        const paymentProfileAge = document.getElementById('payment-profile-age');
        const paymentProfileGender = document.getElementById('payment-profile-gender');
        const paymentProfileCity = document.getElementById('payment-profile-city');

        // Инициализация
        document.addEventListener('DOMContentLoaded', async function() {
            // Загружаем незавершенный платеж если есть
            loadPendingPayment();

            // Обработчик клика на иконку незавершенного платежа
            const pendingPaymentIcon = document.getElementById('pending-payment-icon');
            if (pendingPaymentIcon) {
                pendingPaymentIcon.addEventListener('click', openPendingPayment);
            }

            // Сразу скрываем экран загрузки и показываем контент
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    mainContent.style.display = 'block';

                    // Всегда загружаем английский язык по умолчанию
                    loadTranslations('en');

                    loadVipCatalogs();
                    loadMoreProfiles();
                    setupEventListeners();
                    initFilters();
                    updateStats();
                    loadStatsBanner();
                    startOnlineCountUpdates();
                }, 500);
            }, 2000);

            if (typeof window.Telegram !== 'undefined') {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }
        });

        // Загрузка VIP каталогов (хардкоженные данные)
        async function loadVipCatalogs() {
            // Хардкоженные VIP каталоги
            vipCatalogs = {
                vip: {
                    name: "VIP Catalog",
                    price: 100,
                    redirect_url: "https://t.me/vip_channel",
                    visible: true,
                    preview_count: 250,
                    preview_profiles: [
                        {name: "Diana", age: 16, city: "Moscow"},
                        {name: "Mary", age: 18, city: "Guangzhou"},
                        {name: "Lexy", age: 17, city: "London"}
                    ]
                },
                extra_vip: {
                    name: "Extra VIP",
                    price: 200,
                    redirect_url: "https://t.me/extra_vip_channel",
                    visible: true,
                    preview_count: 300,
                    preview_profiles: [
                        {name: "Julia", age: 22, city: "Tokyo"},
                        {name: "Yu Chen", age: 16, city: "Shanghai"},
                        {name: "Ying", age: 19, city: "Beijing"}
                    ]
                },
                secret: {
                    name: "Secret Catalog",
                    price: 300,
                    redirect_url: "https://t.me/secret_channel",
                    visible: true,
                    preview_count: 500,
                    preview_profiles: [
                        {name: "Sandy", age: 16, city: "Miami"},
                        {name: "Lana", age: 21, city: "Dubai"},
                        {name: "Benny", age: 20, city: "Seoul"}
                    ]
                }
            };
            renderVipCatalogs();
        }

        // Отрисовка VIP каталогов
        function renderVipCatalogs() {
            vipCatalogsGrid.innerHTML = '';

            Object.entries(vipCatalogs).forEach(([catalogKey, catalog]) => {
                if (!catalog.visible) return;

                const catalogDiv = document.createElement('div');
                catalogDiv.className = 'vip-catalog-card';
                const previewProfiles = catalog.preview_profiles || [];
                catalogDiv.innerHTML = `
                    <div class="vip-catalog-header">
                        <span class="vip-catalog-name">${catalog.name}</span>
                        <span class="vip-catalog-price">$${catalog.price}</span>
                    </div>
                    <div class="vip-profiles-grid" id="vip-profiles-${catalogKey}">
                        <!-- VIP анкеты будут добавлены через JS -->
                    </div>
                    <div class="vip-catalog-stats">
                        <span>${catalog.preview_count} ${translations.premium_profiles_count || 'premium profiles'}</span>
                        <span>${translations.blurred_preview || 'Blurred Preview'}</span>
                    </div>
                    <a href="${catalog.redirect_url}" target="_blank" class="unlock-btn">
                        ${translations.unlock_access || 'Unlock Access'} - $${catalog.price}
                    </a>
                `;
                vipCatalogsGrid.appendChild(catalogDiv);

                // Добавляем preview анкеты в этот каталог
                renderVipProfilesForCatalog(catalogKey, previewProfiles);
            });
        }

        // Загрузка VIP анкет
        async function loadVipProfiles() {
            try {
                const response = await fetch('/api/vip-profiles');
                const data = await response.json();
                return data.profiles;
            } catch (error) {
                console.error('Error loading VIP profiles:', error);
                return [];
            }
        }

        // Отрисовка VIP анкет для каталога
        function renderVipProfilesForCatalog(catalogKey, previewProfiles) {
            const container = document.getElementById(`vip-profiles-${catalogKey}`);
            if (!container) return;

            container.innerHTML = '';

            // Капитализация имени
            function capitalize(str) {
                if (!str) return '';
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            }

            // Функция для генерации случайного градиента
            function getRandomGradient() {
                const gradients = [
                    'linear-gradient(135deg, rgba(255,107,157,0.4), rgba(102,126,234,0.4))',
                    'linear-gradient(135deg, rgba(102,126,234,0.4), rgba(118,75,162,0.4))',
                    'linear-gradient(135deg, rgba(255,107,157,0.4), rgba(118,75,162,0.4))',
                    'linear-gradient(135deg, rgba(118,75,162,0.4), rgba(255,107,157,0.4))',
                    'linear-gradient(45deg, rgba(255,107,157,0.3), rgba(102,126,234,0.5))',
                    'linear-gradient(225deg, rgba(102,126,234,0.4), rgba(255,107,157,0.3))',
                    'radial-gradient(circle, rgba(255,107,157,0.4), rgba(102,126,234,0.3))',
                    'radial-gradient(circle, rgba(118,75,162,0.4), rgba(255,107,157,0.3))'
                ];
                return gradients[Math.floor(Math.random() * gradients.length)];
            }

            previewProfiles.forEach(profile => {
                if (!profile.name) return;

                const profileDiv = document.createElement('div');
                profileDiv.className = 'vip-profile-preview';

                // Генерируем случайный заблюренный градиент вместо реального фото
                const randomGradient = getRandomGradient();
                const imageHtml = `<div class="vip-profile-image" style="background: ${randomGradient}; background-size: cover; background-position: center; filter: blur(10px);"></div>`;

                profileDiv.innerHTML = `
                    ${imageHtml}
                    <div class="vip-profile-overlay">
                        <div class="vip-profile-info">
                            <div class="vip-profile-name">${capitalize(profile.name)}</div>
                            <div class="vip-profile-age">${profile.age} ${translations.years_short || 'y.o'}</div>
                            <div class="vip-profile-city">${capitalize(profile.city)}</div>
                        </div>
                    </div>
                `;
                container.appendChild(profileDiv);
            });
        }

        // Обновление онлайн-статистики каждые 3 минуты
        function startOnlineCountUpdates() {
            updateOnlineCount(); // Первоначальное обновление
            onlineUpdateInterval = setInterval(updateOnlineCount, 180000); // 3 минуты
        }

        function updateOnlineCount() {
            const profilesCount = currentProfiles.length;
            onlineCount = Math.min(Math.floor(Math.random() * profilesCount) + 1, profilesCount);
            document.getElementById('online-count').textContent = onlineCount;
        }

        // Загрузка баннера под статистикой
        async function loadStatsBanner() {
            try {
                const response = await fetch('/api/settings/banner');
                const bannerData = await response.json();

                if (bannerData.visible && bannerData.text) {
                    statsBanner.style.display = 'block';
                    statsBannerText.textContent = bannerData.text;
                    statsBannerLink.textContent = bannerData.link_text || 'Join Channel';
                    statsBannerLink.href = bannerData.link || '#';
                }
            } catch (error) {
                console.error('Error loading banner:', error);
            }
        }

        // Загрузка переводов
        function loadTranslations(lang) {
            if (allTranslations[lang]) {
                translations = allTranslations[lang];
                currentLanguage = lang;
                languageText.textContent = getLanguageCode(lang);
                applyTranslations();
            }
        }

        // Получить код языка для кнопки
        function getLanguageCode(lang) {
            const codes = {
                'en': 'EN',
                'ja': 'JA',
                'ko': 'KO',
                'zh': 'ZH',
                'ar': 'AR',
                'de': 'DE',
                'es': 'ES'
            };
            return codes[lang] || 'EN';
        }

        // Безопасное применение перевода
        function safeSetText(id, text, isPlaceholder = false) {
            const element = document.getElementById(id);
            if (element && text !== undefined) {
                if (isPlaceholder) {
                    element.placeholder = text;
                } else {
                    element.textContent = text;
                }
            }
        }

        // Применение переводов
        function applyTranslations() {
            // Обновляем все тексты
            safeSetText('app-subtitle', translations.subtitle);
            safeSetText('premium-profiles-label', translations.premium_profiles);
            safeSetText('online-now-label', translations.online_now);
            safeSetText('anonymous-dating-label', translations.anonymous_dating);
            safeSetText('filters-title', translations.filters);
            safeSetText('filter-city-label', translations.city);
            safeSetText('all-cities', translations.all_cities);
            safeSetText('filter-nationality-label', translations.nationality);
            safeSetText('all-nationalities', translations.all_nationalities);
            safeSetText('filter-gender-label', translations.gender);
            safeSetText('all-genders', translations.all_genders);
            safeSetText('filter-travel-city-label', translations.travel_city);
            safeSetText('all-travel-cities', translations.all_cities);
            safeSetText('filter-age-label', translations.age);
            safeSetText('filter-height-label', translations.height);
            safeSetText('filter-weight-label', translations.weight);
            safeSetText('filter-chest-label', translations.chest);
            safeSetText('reset-text', translations.reset);
            safeSetText('apply-text', translations.apply);
            safeSetText('main-loading', translations.loading);
            safeSetText('loading-more-text', translations.loading_more);
            safeSetText('write-text', translations.write_message);
            safeSetText('pay-text', translations.book_with_crypto);
            safeSetText('promo-text', translations.promocode);
            safeSetText('years-text', translations.years);
            safeSetText('cm-text', translations.cm);
            safeSetText('kg-text', translations.kg);
            safeSetText('apply-promo-text', translations.apply_promocode);
            safeSetText('close-promo-text', translations.close);
            safeSetText('promo-description', translations.enter_promocode);
            safeSetText('comments-title', translations.comments);
            safeSetText('post-comment-text', translations.post_comment);
            safeSetText('no-comments', translations.no_comments);
            safeSetText('comment-input', translations.your_comment, true);
            safeSetText('confirm-payment-text', translations.pay_now);
            safeSetText('payment-amount-label', translations.amount);
            safeSetText('payment-description', translations.select_crypto);
            safeSetText('wallet-address-label', translations.wallet_address);
            safeSetText('payment-profile-title', translations.booking_profile);
            safeSetText('payment-success-title', translations.payment_awaiting);
            safeSetText('payment-success-message', translations.payment_processing);
            safeSetText('close-success-text', translations.close);

            const timerLabel = document.getElementById('timer-label');
            if (timerLabel && translations.timer_label) {
                timerLabel.textContent = translations.timer_label + ':';
            }

            safeSetText('chat-title-text', translations.chat_with);
            safeSetText('attach-file-text', translations.attach_file);
            safeSetText('chat-warning', translations.chat_warning);
            safeSetText('comment-permission-text', translations.comment_permission_required);
            safeSetText('complete-transaction-text', translations.complete_transaction_to_comment);

            // Обновляем опции гендера
            const genderOptions = document.querySelectorAll('#filter-gender option');
            genderOptions[1].textContent = translations.female;
            genderOptions[2].textContent = translations.male;
            genderOptions[3].textContent = translations.transgender;

            // Обновляем лейблы в модальном окне профиля
            safeSetText('label-gender', translations.label_gender);
            safeSetText('label-city', translations.label_city);
            safeSetText('label-nationality', translations.label_nationality);
            safeSetText('label-travel-cities', translations.label_travel_cities);
            safeSetText('label-description', translations.label_description);

            if (chatInput && translations.type_message) {
                chatInput.placeholder = translations.type_message;
            }

            updateActiveFilters();
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Language Selector
            languageBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                languageDropdown.classList.toggle('active');
            });

            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                    languageDropdown.classList.remove('active');
                });
            });

            // Закрытие language dropdown при клике вне
            document.addEventListener('click', function(event) {
                if (!languageBtn.contains(event.target)) {
                    languageDropdown.classList.remove('active');
                }
            });

            // Баннер под статистикой
            closeStatsBanner.addEventListener('click', function() {
                statsBanner.style.display = 'none';
            });

            // Фильтры
            filtersToggle.addEventListener('click', openFilters);
            closeFiltersBtn.addEventListener('click', closeFilters);
            filtersOverlay.addEventListener('click', closeFilters);
            resetFiltersBtn.addEventListener('click', resetFilters);
            applyFiltersBtn.addEventListener('click', applyFilters);

            // Слайдер фото
            prevSlideBtn.addEventListener('click', prevSlide);
            nextSlideBtn.addEventListener('click', nextSlide);

            // Свайп для слайдера
            let startX = 0;
            let endX = 0;

            sliderMain.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });

            sliderMain.addEventListener('touchend', (e) => {
                endX = e.changedTouches[0].clientX;
                handleSwipe();
            });

            function handleSwipe() {
                const swipeDistance = startX - endX;
                if (Math.abs(swipeDistance) > 50) { // Минимальное расстояние свайпа
                    if (swipeDistance > 0) {
                        nextSlide();
                    } else {
                        prevSlide();
                    }
                }
            }

            // Комментарии
            postCommentBtn.addEventListener('click', addComment);

            // Обработка выбора файла
            fileBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);

            // Модальные окна
            closeModalBtn.addEventListener('click', closeProfileModal);
            closeChatBtn.addEventListener('click', closeChatModal);
            writeBtn.addEventListener('click', openChat);
            payBtn.addEventListener('click', openPaymentModal);
            promoBtn.addEventListener('click', openPromoModal);
            closePromoBtn.addEventListener('click', closePromoModal);
            closePromoBtn2.addEventListener('click', closePromoModal);

            // Оплата
            closePaymentBtn.addEventListener('click', closePaymentModal);
            cryptoOptions.forEach(option => {
                option.addEventListener('click', function() {
                    cryptoOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    showWalletAddress(this.getAttribute('data-crypto'));
                });
            });
            copyAddressBtn.addEventListener('click', copyWalletAddress);
            confirmPaymentBtn.addEventListener('click', processPayment);
            closeSuccessBtn.addEventListener('click', closePaymentModal);

            // Промокод
            applyPromoBtn.addEventListener('click', applyPromoCode);
            promoInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') applyPromoCode();
            });

            // Чат
            chatSendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Авто-высота textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });

            window.addEventListener('scroll', handleScroll);
        }

        // Обновление статистики
        function updateStats() {
            const profilesCount = currentProfiles.length;
            document.getElementById('profiles-count').textContent = profilesCount;
        }

        // Слайдер фото
        function updateSlider() {
            if (!currentProfile || !currentProfile.photos) return;

            sliderMain.innerHTML = '';
            sliderThumbs.innerHTML = '';

            currentProfile.photos.forEach((photo, index) => {
                // Основное фото
                const slide = document.createElement('img');
                slide.src = photo;
                slide.alt = `${currentProfile.name} photo ${index + 1}`;
                slide.className = 'slider-image';
                if (index === currentSlideIndex) {
                    slide.classList.add('active');
                }
                sliderMain.appendChild(slide);

                // Миниатюра
                const thumb = document.createElement('div');
                thumb.className = `slider-thumb ${index === currentSlideIndex ? 'active' : ''}`;
                thumb.innerHTML = `<img src="${photo}" alt="Thumbnail ${index + 1}">`;
                thumb.addEventListener('click', () => {
                    currentSlideIndex = index;
                    updateSlider();
                });
                sliderThumbs.appendChild(thumb);
            });
        }

        function nextSlide() {
            if (!currentProfile || !currentProfile.photos) return;
            currentSlideIndex = (currentSlideIndex + 1) % currentProfile.photos.length;
            updateSlider();
        }

        function prevSlide() {
            if (!currentProfile || !currentProfile.photos) return;
            currentSlideIndex = (currentSlideIndex - 1 + currentProfile.photos.length) % currentProfile.photos.length;
            updateSlider();
        }

        // Комментарии
        async function loadComments() {
            if (!currentProfile) return;

            try {
                const response = await fetch(`/api/profiles/${currentProfile.id}/comments`);
                const data = await response.json();

                commentsList.innerHTML = '';

                if (data.comments.length === 0) {
                    noComments.style.display = 'block';
                } else {
                    noComments.style.display = 'none';
                    data.comments.forEach(comment => {
                        const commentDiv = document.createElement('div');
                        commentDiv.className = 'comment';
                        commentDiv.innerHTML = `
                            <div class="comment-header">
                                <span class="comment-author">${comment.user_name}</span>
                                <span class="comment-date">${new Date(comment.created_at).toLocaleDateString()}</span>
                            </div>
                            <div class="comment-text">${comment.text}</div>
                        `;
                        commentsList.appendChild(commentDiv);
                    });
                }

                // Проверяем, может ли пользователь оставлять комментарии
                checkCommentPermission();
            } catch (error) {
                console.error('Error loading comments:', error);
            }
        }

        // Проверка разрешения на комментарии
        async function checkCommentPermission() {
            if (!currentProfile) return;

            try {
                const response = await fetch(`/api/chats/${currentProfile.id}/messages`);
                const data = await response.json();

                // Пользователь может комментировать, если есть системное сообщение о завершенной транзакции
                const hasSuccessfulTransaction = data.messages.some(msg =>
                    msg.is_system && msg.text && msg.text.toLowerCase().includes('transaction successful')
                );

                canComment = hasSuccessfulTransaction;

                // Если транзакция завершена, очищаем незавершенный платеж
                if (hasSuccessfulTransaction && pendingPayment) {
                    clearPendingPayment();
                }

                // Показываем или скрываем форму комментариев
                commentForm.style.display = canComment ? 'block' : 'none';
                commentPermissionRequired.style.display = canComment ? 'none' : 'block';
            } catch (error) {
                console.error('Error checking comment permission:', error);
                commentForm.style.display = 'none';
                commentPermissionRequired.style.display = 'block';
            }
        }

        async function addComment() {
            if (!currentProfile || !canComment) return;

            const text = commentInput.value.trim();

            if (!text) {
                alert('Please enter comment text');
                return;
            }

            try {
                const response = await fetch(`/api/profiles/${currentProfile.id}/comments`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        user_name: 'Anonymous User', // Всегда анонимный
                        text: text
                    })
                });

                if (response.ok) {
                    commentInput.value = '';
                    loadComments();
                } else {
                    const errorData = await response.json();
                    alert(errorData.detail || 'Error adding comment');
                }
            } catch (error) {
                console.error('Error adding comment:', error);
                alert('Error adding comment');
            }
        }

        // Обработка выбора файла
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                sendMessage(file);
            }
        }

        // Переключение языка
        function switchLanguage(lang) {
            loadTranslations(lang);

            currentPage = 0;
            currentProfiles = [];
            cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            loadMoreProfiles();
            loadVipCatalogs();
        }

        // Открытие фильтров
        function openFilters() {
            filtersSidebar.classList.add('active');
            filtersOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Закрытие фильтров
        function closeFilters() {
            filtersSidebar.classList.remove('active');
            filtersOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Сброс фильтров
        function resetFilters() {
            currentFilters = {
                city: 'all',
                nationality: 'all',
                travel_city: 'all',
                gender: 'all',
                age_min: 18,
                age_max: 70,
                height_min: 120,
                height_max: 220,
                weight_min: 35,
                weight_max: 120,
                chest_min: 1,
                chest_max: 12
            };
            updateFilterInputs();
            updateActiveFilters();
            applyFilters();
        }

        // Обновление значений в полях фильтров
        function updateFilterInputs() {
            filterCity.value = currentFilters.city;
            filterNationality.value = currentFilters.nationality;
            filterGender.value = currentFilters.gender;
            filterTravelCity.value = currentFilters.travel_city;
            filterAgeMin.value = currentFilters.age_min;
            filterAgeMax.value = currentFilters.age_max;
            filterHeightMin.value = currentFilters.height_min;
            filterHeightMax.value = currentFilters.height_max;
            filterWeightMin.value = currentFilters.weight_min;
            filterWeightMax.value = currentFilters.weight_max;
            filterChestMin.value = currentFilters.chest_min;
            filterChestMax.value = currentFilters.chest_max;
        }

        // Применение фильтров
        function applyFilters() {
            currentFilters = {
                city: filterCity.value,
                nationality: filterNationality.value,
                gender: filterGender.value,
                travel_city: filterTravelCity.value,
                age_min: parseInt(filterAgeMin.value) || 18,
                age_max: parseInt(filterAgeMax.value) || 70,
                height_min: parseInt(filterHeightMin.value) || 120,
                height_max: parseInt(filterHeightMax.value) || 220,
                weight_min: parseInt(filterWeightMin.value) || 35,
                weight_max: parseInt(filterWeightMax.value) || 120,
                chest_min: parseInt(filterChestMin.value) || 1,
                chest_max: parseInt(filterChestMax.value) || 12
            };

            updateActiveFilters();
            closeFilters();

            currentPage = 0;
            currentProfiles = [];
            cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            loadMoreProfiles();
        }

        // Обновление активных фильтров
        function updateActiveFilters() {
            activeFilters.innerHTML = '';

            const filters = [];

            if (currentFilters.city !== 'all') {
                filters.push(`${currentFilters.city} <span class="remove" onclick="removeFilter('city')">×</span>`);
            }

            if (currentFilters.nationality !== 'all') {
                filters.push(`${currentFilters.nationality} <span class="remove" onclick="removeFilter('nationality')">×</span>`);
            }

            if (currentFilters.gender !== 'all') {
                filters.push(`${currentFilters.gender} <span class="remove" onclick="removeFilter('gender')">×</span>`);
            }

            if (currentFilters.travel_city !== 'all') {
                filters.push(`${currentFilters.travel_city} <span class="remove" onclick="removeFilter('travel_city')">×</span>`);
            }

            if (currentFilters.age_min > 18 || currentFilters.age_max < 70) {
                filters.push(`${currentFilters.age_min}-${currentFilters.age_max} <span class="remove" onclick="removeFilter('age')">×</span>`);
            }

            if (currentFilters.height_min > 120 || currentFilters.height_max < 220) {
                filters.push(`${currentFilters.height_min}-${currentFilters.height_max}cm <span class="remove" onclick="removeFilter('height')">×</span>`);
            }

            if (currentFilters.weight_min > 35 || currentFilters.weight_max < 120) {
                filters.push(`${currentFilters.weight_min}-${currentFilters.weight_max}kg <span class="remove" onclick="removeFilter('weight')">×</span>`);
            }

            if (currentFilters.chest_min > 1 || currentFilters.chest_max < 12) {
                filters.push(`${currentFilters.chest_min}-${currentFilters.chest_max} <span class="remove" onclick="removeFilter('chest')">×</span>`);
            }

            filters.forEach(filter => {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = filter;
                activeFilters.appendChild(tag);
            });
        }

        // Удаление фильтра
        function removeFilter(type) {
            switch(type) {
                case 'city':
                    currentFilters.city = 'all';
                    break;
                case 'nationality':
                    currentFilters.nationality = 'all';
                    break;
                case 'gender':
                    currentFilters.gender = 'all';
                    break;
                case 'travel_city':
                    currentFilters.travel_city = 'all';
                    break;
                case 'age':
                    currentFilters.age_min = 18;
                    currentFilters.age_max = 70;
                    break;
                case 'height':
                    currentFilters.height_min = 120;
                    currentFilters.height_max = 220;
                    break;
                case 'weight':
                    currentFilters.weight_min = 35;
                    currentFilters.weight_max = 120;
                    break;
                case 'chest':
                    currentFilters.chest_min = 1;
                    currentFilters.chest_max = 12;
                    break;
            }

            updateFilterInputs();
            updateActiveFilters();

            currentPage = 0;
            currentProfiles = [];
            cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            loadMoreProfiles();
        }

        // Инициализация фильтров
        async function initFilters() {
            await loadCities();
            await loadNationalities();
            await loadTravelCities();
            updateFilterInputs();
            updateActiveFilters();
        }

        // Загрузка списка городов
        async function loadCities() {
            try {
                const response = await fetch('/api/filters/cities');
                const data = await response.json();

                filterCity.innerHTML = `<option value="all">${translations.all_cities}</option>`;
                data.cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    filterCity.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading cities:', error);
            }
        }

        // Загрузка списка национальностей
        async function loadNationalities() {
            try {
                const response = await fetch('/api/filters/nationalities');
                const data = await response.json();

                filterNationality.innerHTML = `<option value="all">${translations.all_nationalities}</option>`;
                data.nationalities.forEach(nationality => {
                    const option = document.createElement('option');
                    option.value = nationality;
                    option.textContent = nationality;
                    filterNationality.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading nationalities:', error);
            }
        }

        // Загрузка списка городов вылета
        async function loadTravelCities() {
            try {
                const response = await fetch('/api/filters/travel_cities');
                const data = await response.json();

                filterTravelCity.innerHTML = `<option value="all">${translations.all_cities}</option>`;
                data.travel_cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    filterTravelCity.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading travel cities:', error);
            }
        }

        // Загрузка профилей с фильтрами
        async function loadMoreProfiles() {
            if (isLoading) return;

            isLoading = true;
            if (currentPage === 0) {
                loadingMore.style.display = 'block';
            }

            try {
                const params = new URLSearchParams({
                    page: currentPage,
                    limit: profilesPerPage,
                    ...currentFilters
                });

                const response = await fetch(`/api/profiles?${params}`);
                const data = await response.json();

                if (data.profiles.length > 0) {
                    currentProfiles = [...currentProfiles, ...data.profiles];
                    renderProfiles(data.profiles);
                    currentPage++;
                } else if (currentPage === 0) {
                    // Если нет анкет на первой странице - показываем закат
                    cardsContainer.innerHTML = `<div class="no-profiles">${translations.no_profiles}</div>`;
                }

                if (!data.has_more) {
                    loadingMore.style.display = 'none';
                }

                updateStats();
            } catch (error) {
                console.error('Error loading profiles:', error);
                cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            }

            isLoading = false;
            if (currentPage > 0) {
                loadingMore.style.display = 'none';
            }
        }

        // Отрисовка профилей
        function renderProfiles(profiles) {
            if (currentPage === 0) {
                cardsContainer.innerHTML = '';
            }

            profiles.forEach(profile => {
                const card = document.createElement('div');
                card.className = 'card fade-in';
                card.innerHTML = `
                    <img src="${profile.photos[0]}" alt="${profile.name}" class="card-image">
                    <div class="card-content">
                        <h3 class="card-title">${profile.name} <span class="card-age">${profile.age}</span></h3>
                        <p class="card-info">${profile.city} • ${profile.nationality || 'Unknown'} • ${profile.gender || 'Unknown'}</p>
                        <div class="card-stats">
                            <span class="stat-badge">${profile.height} ${translations.cm}</span>
                            <span class="stat-badge">${profile.weight} ${translations.kg}</span>
                            <span class="stat-badge">${profile.chest} chest</span>
                        </div>
                        <p class="card-description">${profile.description}</p>
                        <div class="card-actions">
                            <button class="btn btn-secondary view-profile" data-id="${profile.id}">
                                <span>${translations.view_profile}</span>
                            </button>
                        </div>
                    </div>
                `;
                cardsContainer.appendChild(card);
            });

            // Добавляем обработчики клика на карточки
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', function(event) {
                    if (!event.target.closest('.view-profile')) {
                        const profileId = this.querySelector('.view-profile').getAttribute('data-id');
                        openProfileModal(parseInt(profileId));
                    }
                });
            });

            // Обработчики для кнопок "View Profile"
            document.querySelectorAll('.view-profile').forEach(btn => {
                btn.addEventListener('click', function(event) {
                    event.stopPropagation();
                    const profileId = parseInt(this.getAttribute('data-id'));
                    openProfileModal(profileId);
                });
            });
        }

        // Открытие модального окна профиля
        async function openProfileModal(profileId) {
            try {
                const response = await fetch(`/api/profiles/${profileId}`);
                currentProfile = await response.json();

                modalProfileName.textContent = currentProfile.name;
                modalProfileAge.textContent = currentProfile.age;
                modalProfileHeight.textContent = currentProfile.height;
                modalProfileWeight.textContent = currentProfile.weight;
                modalProfileChest.textContent = currentProfile.chest;
                modalProfileGender.textContent = currentProfile.gender || 'Unknown';
                modalProfileCity.textContent = currentProfile.city;
                modalProfileNationality.textContent = currentProfile.nationality || 'Unknown';

                const travelCities = currentProfile.travel_cities ? currentProfile.travel_cities.join(', ') : 'None';
                modalProfileTravelCities.textContent = travelCities;

                modalProfileDescription.textContent = currentProfile.description;

                currentSlideIndex = 0;
                updateSlider();
                loadComments();

                profileModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            } catch (error) {
                console.error('Error loading profile:', error);
                alert('Error loading profile');
            }
        }

        // Закрытие модального окна профиля
        function closeProfileModal() {
            profileModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Открытие промокода
        function openPromoModal() {
            promoModal.style.display = 'block';
            promoInput.value = '';
            promoResult.style.display = 'none';
        }

        // Закрытие промокода
        function closePromoModal() {
            promoModal.style.display = 'none';
        }

        // Применение промокода
        async function applyPromoCode() {
            const code = promoInput.value.trim();

            if (!code) {
                showPromoResult(translations.enter_promocode, 'error');
                return;
            }

            try {
                const response = await fetch('/api/promocodes/validate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ code: code })
                });

                const result = await response.json();

                if (result.valid) {
                    showPromoResult(result.message, 'success');
                    // Здесь можно применить скидку к оплате
                } else {
                    showPromoResult(result.message, 'error');
                }
            } catch (error) {
                console.error('Error validating promocode:', error);
                showPromoResult(translations.promocode_invalid, 'error');
            }
        }

        // Показать результат промокода
        function showPromoResult(message, type) {
            promoResult.textContent = message;
            promoResult.className = `promo-result promo-${type}`;
            promoResult.style.display = 'block';
        }

        // Открытие чата
        function openChat() {
            if (!currentProfile) return;

            chatTitle.textContent = `${currentProfile.name}`;
            if (currentProfile.photos && currentProfile.photos.length > 0) {
                chatAvatar.src = currentProfile.photos[0];
            }
            chatBody.innerHTML = '';
            chatInput.value = '';
            fileInput.value = '';

            lastMessageId = 0;
            loadChatHistory();

            chatModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Закрытие чата
        function closeChatModal() {
            chatModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            stopChatUpdates();
        }

        // Загрузка истории чата
        async function loadChatHistory() {
            try {
                const response = await fetch(`/api/chats/${currentProfile.id}/messages`);
                const data = await response.json();

                chatBody.innerHTML = '';

                if (data.messages.length === 0) {
                    const welcomeMsg = document.createElement('div');
                    welcomeMsg.className = 'message other';
                    welcomeMsg.innerHTML = `
                        <div class="message-bubble">
                            ${translations.welcome_message}
                            <div class="message-time">${new Date().toLocaleTimeString()}</div>
                        </div>
                    `;
                    chatBody.appendChild(welcomeMsg);
                } else {
                    data.messages.forEach(msg => {
                        renderMessage(msg);
                        if (msg.id > lastMessageId) {
                            lastMessageId = msg.id;
                        }
                    });
                }

                chatBody.scrollTop = chatBody.scrollHeight;
                startChatUpdates();

            } catch (error) {
                console.error('Error loading chat:', error);
            }
        }

        // Отрисовка сообщения
        function renderMessage(msg) {
            if (msg.is_system) {
                // Системное сообщение
                const systemDiv = document.createElement('div');
                systemDiv.className = 'system-message';
                systemDiv.innerHTML = `<div class="system-bubble">${msg.text}</div>`;
                chatBody.appendChild(systemDiv);
                return;
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${msg.is_from_user ? 'user' : 'other'}`;

            let messageContent = '';

            if (msg.file_url) {
                // Сообщение с файлом
                let fileContent = '';
                const fileType = msg.file_type || 'file';

                if (fileType === 'image') {
                    fileContent = `
                        <img src="${msg.file_url}" alt="Image" class="file-preview">
                    `;
                } else if (fileType === 'video') {
                    fileContent = `
                        <video controls class="file-preview">
                            <source src="${msg.file_url}" type="video/mp4">
                            Your browser does not support video.
                        </video>
                    `;
                } else {
                    fileContent = `
                        <div class="file-info">${msg.file_name}</div>
                        <a href="${msg.file_url}" target="_blank" class="file-link">${translations.download}</a>
                    `;
                }

                messageContent = `
                    <div class="message-bubble file-message">
                        ${fileContent}
                        ${msg.text ? `<div style="margin-top: 8px;">${msg.text}</div>` : ''}
                        <div class="message-time">${new Date(msg.created_at).toLocaleTimeString()}</div>
                    </div>
                `;
            } else {
                // Текстовое сообщение
                messageContent = `
                    <div class="message-bubble">
                        ${msg.text}
                        <div class="message-time">${new Date(msg.created_at).toLocaleTimeString()}</div>
                    </div>
                `;
            }

            messageDiv.innerHTML = messageContent;
            chatBody.appendChild(messageDiv);
        }

        // Проверка новых сообщений
        async function checkForNewMessages() {
            if (!currentProfile) return;

            try {
                const response = await fetch(`/api/chats/${currentProfile.id}/updates?last_message_id=${lastMessageId}`);
                const data = await response.json();

                if (data.messages.length > 0) {
                    data.messages.forEach(msg => {
                        renderMessage(msg);
                        if (msg.id > lastMessageId) {
                            lastMessageId = msg.id;
                        }

                        // Проверяем, является ли сообщение системным с "transaction successful"
                        if (msg.is_system && msg.text && msg.text.toLowerCase().includes('transaction successful')) {
                            // Очищаем незавершенный платеж
                            if (pendingPayment) {
                                clearPendingPayment();
                            }
                            canComment = true;
                        }
                    });

                    chatBody.scrollTop = chatBody.scrollHeight;
                }

                if (data.last_message_id > lastMessageId) {
                    lastMessageId = data.last_message_id;
                }

            } catch (error) {
                console.error('Error checking updates:', error);
            }
        }

        // Запуск авто-обновления
        function startChatUpdates() {
            if (chatUpdateInterval) {
                clearInterval(chatUpdateInterval);
            }

            chatUpdateInterval = setInterval(checkForNewMessages, 2000);
        }

        // Остановка авто-обновления
        function stopChatUpdates() {
            if (chatUpdateInterval) {
                clearInterval(chatUpdateInterval);
                chatUpdateInterval = null;
            }
            lastMessageId = 0;
        }

        // Отправка сообщения
        async function sendMessage(file = null) {
            const messageText = chatInput.value.trim();

            if (!messageText && !file) return;

            try {
                const formData = new FormData();
                if (messageText) formData.append('text', messageText);
                if (file) formData.append('file', file);

                const response = await fetch(`/api/chats/${currentProfile.id}/messages`, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    chatInput.value = '';
                    chatInput.style.height = 'auto';
                    fileInput.value = '';

                    if (result.message_id > lastMessageId) {
                        lastMessageId = result.message_id;
                    }

                    // Перезагружаем историю чата для отображения нового сообщения
                    loadChatHistory();
                } else {
                    throw new Error('Error sending');
                }

            } catch (error) {
                console.error('Error sending:', error);
                const errorMsg = document.createElement('div');
                errorMsg.className = 'message other';
                errorMsg.innerHTML = `<div class="message-bubble">${translations.error_sending}</div>`;
                chatBody.appendChild(errorMsg);
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        }

        // Открытие модального окна оплаты
        async function openPaymentModal() {
            if (!currentProfile) return;

            try {
                // Останавливаем таймер, если он запущен
                if (paymentTimerInterval) {
                    clearInterval(paymentTimerInterval);
                    paymentTimerInterval = null;
                }

                // Сбрасываем отображение таймера
                const timerDisplay = document.getElementById('timer-display');
                if (timerDisplay) {
                    timerDisplay.textContent = '60:00';
                }

                // Загружаем кошельки
                const response = await fetch('/api/settings/crypto_wallets');
                const wallets = await response.json();

                // Сбрасываем состояние
                cryptoOptions.forEach(opt => opt.classList.remove('selected'));
                walletAddress.style.display = 'none';
                paymentSuccess.style.display = 'none';
                document.getElementById('payment-selection').style.display = 'block';

                // Заполняем информацию о профиле
                paymentProfileName.textContent = `Name: ${currentProfile.name}`;
                paymentProfileAge.textContent = `Age: ${currentProfile.age}`;
                paymentProfileGender.textContent = `Gender: ${currentProfile.gender || 'Unknown'}`;
                paymentProfileCity.textContent = `City: ${currentProfile.city}`;

                paymentModal.style.display = 'block';
            } catch (error) {
                console.error('Error opening payment modal:', error);
                alert('Error opening payment system');
            }
        }

        // Закрытие модального окна оплаты
        function closePaymentModal() {
            // Останавливаем таймер при закрытии окна
            if (paymentTimerInterval) {
                clearInterval(paymentTimerInterval);
                paymentTimerInterval = null;
            }
            paymentModal.style.display = 'none';
        }

        // Показать адрес кошелька
        async function showWalletAddress(cryptoType) {
            try {
                const response = await fetch('/api/settings/crypto_wallets');
                const wallets = await response.json();

                const address = wallets[cryptoType];
                if (address) {
                    addressText.textContent = address;
                    walletAddress.style.display = 'block';
                }
            } catch (error) {
                console.error('Error loading wallet address:', error);
            }
        }

        // Копировать адрес кошелька
        function copyWalletAddress() {
            const address = addressText.textContent;
            navigator.clipboard.writeText(address).then(() => {
                const originalText = copyAddressBtn.textContent;
                copyAddressBtn.textContent = translations.copied;
                setTimeout(() => {
                    copyAddressBtn.textContent = originalText;
                }, 2000);
            });
        }

        // Таймер оплаты (60 минут)
        let paymentTimerInterval = null;
        let pendingPayment = null; // Текущий незавершенный платеж

        function startPaymentTimer(seconds) {
            // Очищаем предыдущий таймер, если есть
            if (paymentTimerInterval) {
                clearInterval(paymentTimerInterval);
            }

            let timeRemaining = seconds;
            const timerDisplay = document.getElementById('timer-display');

            // Обновляем таймер каждую секунду
            paymentTimerInterval = setInterval(() => {
                timeRemaining--;

                const minutes = Math.floor(timeRemaining / 60);
                const secs = timeRemaining % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

                // Когда время истекло
                if (timeRemaining <= 0) {
                    clearInterval(paymentTimerInterval);
                    timerDisplay.textContent = '00:00';
                    // Очищаем незавершенный платеж когда таймер истек
                    clearPendingPayment();
                }
            }, 1000);
        }

        // Управление незавершенными платежами
        function savePendingPayment(profile, amount, cryptoType, startTime) {
            pendingPayment = {
                profile: profile,
                amount: amount,
                cryptoType: cryptoType,
                startTime: startTime,
                endTime: startTime + (60 * 60 * 1000) // 60 минут
            };
            localStorage.setItem('pendingPayment', JSON.stringify(pendingPayment));
            showPendingPaymentIcon();
        }

        function loadPendingPayment() {
            const saved = localStorage.getItem('pendingPayment');
            if (saved) {
                pendingPayment = JSON.parse(saved);
                const now = Date.now();
                // Проверяем не истек ли таймер
                if (pendingPayment.endTime > now) {
                    showPendingPaymentIcon();
                    return pendingPayment;
                } else {
                    clearPendingPayment();
                }
            }
            return null;
        }

        function clearPendingPayment() {
            pendingPayment = null;
            localStorage.removeItem('pendingPayment');
            hidePendingPaymentIcon();
        }

        function showPendingPaymentIcon() {
            const icon = document.getElementById('pending-payment-icon');
            if (icon) {
                icon.style.display = 'flex';
            }
        }

        function hidePendingPaymentIcon() {
            const icon = document.getElementById('pending-payment-icon');
            if (icon) {
                icon.style.display = 'none';
            }
        }

        function openPendingPayment() {
            if (!pendingPayment) return;

            // Восстанавливаем профиль и открываем окно оплаты
            currentProfile = pendingPayment.profile;

            // Открываем модальное окно
            paymentModal.style.display = 'block';

            // Показываем страницу успеха с таймером
            document.getElementById('payment-selection').style.display = 'none';
            paymentSuccess.style.display = 'block';

            // Вычисляем оставшееся время
            const now = Date.now();
            const remainingSeconds = Math.floor((pendingPayment.endTime - now) / 1000);

            if (remainingSeconds > 0) {
                startPaymentTimer(remainingSeconds);
            } else {
                clearPendingPayment();
            }
        }

        // Обработка платежа
        async function processPayment() {
            const selectedCrypto = document.querySelector('.crypto-option.selected');
            if (!selectedCrypto) {
                alert('Please select cryptocurrency');
                return;
            }

            const amount = paymentAmount.value;
            if (!amount || amount < 10) {
                alert('Please enter valid amount (min $10)');
                return;
            }

            const cryptoType = selectedCrypto.getAttribute('data-crypto');

            try {
                confirmPaymentBtn.textContent = translations.payment_processing;
                confirmPaymentBtn.disabled = true;

                const response = await fetch('/api/payment/crypto', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        profile_id: currentProfile.id,
                        amount: amount,
                        currency: 'USD',
                        wallet: cryptoType
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    // Показываем успех
                    document.getElementById('payment-selection').style.display = 'none';
                    paymentSuccess.style.display = 'block';

                    // Сохраняем незавершенный платеж
                    const startTime = Date.now();
                    savePendingPayment(currentProfile, amount, cryptoType, startTime);

                    // Запускаем таймер на 60 минут
                    startPaymentTimer(60 * 60);
                } else {
                    throw new Error(result.message || 'Payment failed');
                }

            } catch (error) {
                console.error('Error processing payment:', error);
                alert('Payment error: ' + error.message);
            } finally {
                confirmPaymentBtn.textContent = translations.pay_now;
                confirmPaymentBtn.disabled = false;
            }
        }

        // Бесконечная прокрутка
        function handleScroll() {
            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;

            if (scrollTop + clientHeight >= scrollHeight - 100 && !isLoading) {
                loadMoreProfiles();
            }
        }

        // ==================== BOTTOM NAVIGATION & PAGES ====================
        function switchPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));

            // Hide main-content if switching away from home
            const mainContent = document.getElementById('main-content');

            if (pageName === 'home') {
                mainContent.style.display = 'block';
                document.getElementById('home-page').classList.add('active');
                document.querySelector('.nav-item[onclick*="home"]').classList.add('active');
            } else {
                mainContent.style.display = 'none';

                if (pageName === 'chats') {
                    document.getElementById('chats-page').classList.add('active');
                    document.querySelector('.nav-item[onclick*="chats"]').classList.add('active');
                    loadUserChats();
                } else if (pageName === 'paid') {
                    document.getElementById('paid-orders-page').classList.add('active');
                    document.querySelector('.nav-item[onclick*="paid"]').classList.add('active');
                    loadOrders('booked');
                } else if (pageName === 'unpaid') {
                    document.getElementById('unpaid-orders-page').classList.add('active');
                    document.querySelector('.nav-item[onclick*="unpaid"]').classList.add('active');
                    loadOrders('unpaid');
                }
            }
        }

        // Load user chats
        async function loadUserChats() {
            const container = document.getElementById('chats-list-container');
            container.innerHTML = '<div class="loading">Loading chats...</div>';

            try {
                const response = await fetch('/api/user/chats');
                const data = await response.json();

                container.innerHTML = '';

                if (!data.chats || data.chats.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-text">No chats yet</div>
                        </div>
                    `;
                    return;
                }

                data.chats.forEach(chat => {
                    const chatItem = document.createElement('div');
                    chatItem.className = 'chat-item';
                    chatItem.onclick = () => openChatFromList(chat.profile_id);

                    const lastMessage = chat.last_message || 'No messages yet';
                    const unreadCount = chat.unread_count || 0;
                    const time = chat.last_message_time ? new Date(chat.last_message_time).toLocaleTimeString('en-US', {hour: '2-digit', minute:'2-digit'}) : '';

                    chatItem.innerHTML = `
                        <img src="${chat.profile_photo || '/default-avatar.png'}" alt="${chat.profile_name}" class="chat-avatar">
                        <div class="chat-info">
                            <div class="chat-name">${chat.profile_name}</div>
                            <div class="chat-last-message">${lastMessage}</div>
                        </div>
                        <div>
                            ${time ? `<div class="chat-time">${time}</div>` : ''}
                            ${unreadCount > 0 ? `<div class="chat-unread">${unreadCount}</div>` : ''}
                        </div>
                    `;
                    container.appendChild(chatItem);
                });

                // Update badge
                const totalUnread = data.chats.reduce((sum, chat) => sum + (chat.unread_count || 0), 0);
                updateChatBadge(totalUnread);

            } catch (error) {
                console.error('Error loading chats:', error);
                container.innerHTML = '<div class="empty-state"><div class="empty-state-text">Error loading chats</div></div>';
            }
        }

        function openChatFromList(profileId) {
            const profile = currentProfiles.find(p => p.id === profileId);
            if (profile) {
                openChat(profile);
                switchPage('home'); // Return to home to show chat modal
            }
        }

        function updateChatBadge(count) {
            const badge = document.getElementById('chats-badge');
            if (count > 0) {
                badge.textContent = count > 99 ? '99+' : count;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
        }

        // Load orders (booked/unpaid)
        async function loadOrders(type) {
            const listId = type === 'booked' ? 'paid-orders-list' : 'unpaid-orders-list';
            const container = document.getElementById(listId);
            container.innerHTML = '<div class="loading">Loading orders...</div>';

            try {
                const response = await fetch(`/api/user/orders?status=${type}`);
                const data = await response.json();

                container.innerHTML = '';

                if (!data.orders || data.orders.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-text">No ${type} orders</div>
                        </div>
                    `;
                    return;
                }

                data.orders.forEach(order => {
                    const orderItem = document.createElement('div');
                    orderItem.className = 'order-item';

                    orderItem.innerHTML = `
                        <div class="order-header">
                            <span style="font-weight: 700; color: var(--text);">Order #${order.id}</span>
                            <span class="order-status ${type}">${type === 'booked' ? 'Booked' : 'Pending'}</span>
                        </div>
                        <div class="order-profile">
                            <img src="${order.profile_photo || '/default-avatar.png'}" alt="${order.profile_name}" class="order-avatar">
                            <div>
                                <div style="font-weight: 600; color: var(--text);">${order.profile_name}</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">${order.profile_city || 'Unknown'}</div>
                            </div>
                        </div>
                        <div class="order-info">
                            <div>Amount: <strong>${order.amount} ${order.crypto_type || 'USDT'}</strong></div>
                            <div>Date: ${new Date(order.created_at).toLocaleString()}</div>
                            ${order.expires_at && type === 'unpaid' ? `<div>Expires: ${new Date(order.expires_at).toLocaleString()}</div>` : ''}
                        </div>
                    `;
                    container.appendChild(orderItem);
                });

                // Update unpaid badge
                if (type === 'unpaid') {
                    const badge = document.getElementById('unpaid-badge');
                    if (data.orders.length > 0) {
                        badge.textContent = data.orders.length > 99 ? '99+' : data.orders.length;
                        badge.style.display = 'block';
                    } else {
                        badge.style.display = 'none';
                    }
                }

            } catch (error) {
                console.error('Error loading orders:', error);
                container.innerHTML = '<div class="empty-state"><div class="empty-state-text">Error loading orders</div></div>';
            }
        }

        // Stop chat updates when closing chat
        closeChatBtn.addEventListener('click', () => {
            chatModal.style.display = 'none';
            stopChatUpdates();
        });

        // Telegram WebApp интеграция
        if (typeof window.Telegram === 'undefined') {
            window.Telegram = {
                WebApp: {
                    initData: 'test',
                    initDataUnsafe: {
                        user: {
                            id: 123456,
                            first_name: 'Test',
                            last_name: 'User',
                            username: 'testuser'
                        }
                    },
                    ready: function() { console.log('Telegram WebApp ready') },
                    expand: function() { console.log('WebApp expanded') },
                    close: function() { console.log('WebApp closed') },
                    sendData: function(data) {
                        console.log('Data sent to bot:', data)
                    }
                }
            };
        }

        // Telegram бот - конфигурация
        const TELEGRAM_BOT_USERNAME = 'YOUR_BOT_USERNAME'; // Замените на имя вашего бота

        // Открытие Telegram бота
        function openTelegramBot() {
            const botUrl = `https://t.me/${TELEGRAM_BOT_USERNAME}`;

            if (window.Telegram && window.Telegram.WebApp) {
                // Если в Telegram Mini App, открываем внутри Telegram
                window.Telegram.WebApp.openTelegramLink(botUrl);
            } else {
                // В обычном браузере
                window.open(botUrl, '_blank');
            }
        }
    </script>

    <!-- Плавающая кнопка Telegram бота -->
    <button class="telegram-bot-btn" onclick="openTelegramBot()" data-tooltip="Contact Support Bot">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.02-1.96 1.24-5.53 3.65-.52.36-.99.53-1.42.52-.47-.01-1.37-.26-2.03-.48-.82-.27-1.47-.42-1.42-.88.03-.24.37-.48 1.02-.73 3.99-1.73 6.65-2.87 7.98-3.43 3.8-1.58 4.59-1.86 5.1-1.87.11 0 .37.03.53.17.14.12.18.28.19.39.01.11.03.36.02.55z"/>
        </svg>
    </button>

</body>
</html>
