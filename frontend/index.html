<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ashoo - Anonymous Dating</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        :root {
            --primary: #ff6b9d;
            --primary-dark: #8b225e;
            --secondary: #667eea;
            --accent: #764ba2;
            --background: #0f0f0f;
            --surface: #1a1a1a;
            --card: #2a2a2a;
            --text: #ffffff;
            --text-secondary: #b0b0b0;
            --success: #28a745;
            --warning: #ffc107;
            --error: #dc3545;
        }

        body {
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(255, 107, 157, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(118, 75, 162, 0.05) 0%, transparent 50%);
            z-index: -1;
            animation: backgroundShift 20s ease-in-out infinite;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        /* –ë–∞–Ω–Ω–µ—Ä –ø–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π */
        .stats-banner {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            padding: 15px 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            color: white;
            display: none;
        }

        .stats-banner-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stats-banner-text {
            flex: 1;
            font-weight: 600;
            font-size: 14px;
        }

        .stats-banner-link {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stats-banner-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .close-stats-banner {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-stats-banner:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Language Selector */
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }

        .language-btn {
            background: rgba(255, 107, 157, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.2);
        }

        .language-btn:hover {
            background: rgba(255, 107, 157, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.3);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--surface);
            backdrop-filter: blur(20px);
            border: 1px solid var(--primary);
            border-radius: 15px;
            margin-top: 10px;
            min-width: 150px;
            display: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .language-dropdown.active {
            display: block;
            animation: dropdownAppear 0.3s ease;
        }

        @keyframes dropdownAppear {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .language-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 107, 157, 0.1);
            font-size: 14px;
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: rgba(255, 107, 157, 0.1);
        }

        /* –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 50%, var(--background) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-content {
            text-align: center;
            animation: fadeInUp 1s ease;
        }

        .loading-logo {
            font-size: 48px;
            font-weight: 800;
            background: linear-gradient(45deg, #fff, #ff8fab);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .loading-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            font-weight: 500;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        /* –•–µ–¥–µ—Ä */
        .main-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            position: relative;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .logo {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* –ö–Ω–æ–ø–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
        .filters-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 5px;
            z-index: 1001;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
        }

        .filters-toggle:hover {
            background: var(--secondary);
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .filter-bar {
            width: 25px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        /* –ë–æ–∫–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */
        .filters-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .filters-sidebar {
            position: fixed;
            top: 0;
            left: -400px;
            width: 380px;
            height: 100vh;
            background: var(--surface);
            border-right: 1px solid var(--primary);
            z-index: 1002;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            padding: 30px;
            box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
        }

        .filters-sidebar.active {
            left: 0;
        }

        .filters-header {
            padding: 0 0 30px 0;
            border-bottom: 1px solid rgba(255, 107, 157, 0.2);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .filters-title {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 700;
        }

        .close-btn {
            background: rgba(255, 107, 157, 0.1);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: rotate(90deg);
        }

        .filter-group {
            margin-bottom: 30px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 12px;
            color: var(--primary);
            font-weight: 600;
            font-size: 1rem;
        }

        .modern-select {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 107, 157, 0.05);
            border: 2px solid var(--primary);
            border-radius: 15px;
            color: var(--text);
            font-size: 16px;
            outline: none;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ff6b9d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 20px center;
            background-size: 16px;
            transition: all 0.3s ease;
        }

        .modern-select:hover {
            background-color: rgba(255, 107, 157, 0.1);
            border-color: var(--secondary);
        }

        .modern-select:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .range-inputs {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .range-inputs input {
            flex: 1;
            text-align: center;
            padding: 15px;
            background: rgba(255, 107, 157, 0.05);
            border: 1px solid var(--primary);
            border-radius: 12px;
            color: var(--text);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .range-inputs input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }

        .range-inputs span {
            color: var(--text-secondary);
            font-weight: 600;
            min-width: 20px;
        }

        .filter-actions {
            display: flex;
            gap: 15px;
            margin-top: 40px;
        }

        .filter-actions .btn {
            flex: 1;
        }

        /* –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */
        .active-filters {
            display: flex;
            gap: 10px;
            margin: 0 0 20px 0;
            flex-wrap: wrap;
            padding: 20px;
            background: var(--surface);
            border-radius: 20px;
            border: 1px solid rgba(255, 107, 157, 0.2);
        }

        .filter-tag {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .filter-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }

        .filter-tag .remove {
            cursor: pointer;
            font-weight: bold;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .filter-tag .remove:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--card);
            border-radius: 25px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 107, 157, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.3);
            border-color: rgba(255, 107, 157, 0.3);
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 700;
            z-index: 2;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .card-image {
            width: 100%;
            height: 280px;
            object-fit: cover;
            display: block;
            transition: transform 0.4s ease;
        }

        .card:hover .card-image {
            transform: scale(1.05);
        }

        .card-content {
            padding: 25px;
            position: relative;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-age {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .card-info {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-stats {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .stat-badge {
            background: rgba(255, 107, 157, 0.1);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            border: 1px solid rgba(255, 107, 157, 0.2);
            transition: all 0.3s ease;
        }

        .stat-badge:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: translateY(-2px);
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.6);
        }

        .btn-secondary {
            background: rgba(255, 107, 157, 0.1);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-secondary:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .btn-pay {
            background: linear-gradient(135deg, var(--success), #1e7e34);
            color: white;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-pay:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.6);
        }

        .btn-promo {
            background: linear-gradient(135deg, var(--warning), #e0a800);
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
        }

        .btn-promo:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.6);
        }

        /* Loading states */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            font-size: 18px;
            grid-column: 1 / -1;
        }

        .no-profiles {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
            font-size: 18px;
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
            border-radius: 20px;
            margin: 20px 0;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .no-profiles::before {
            content: "";
            display: block;
            font-size: 4rem;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--surface);
            margin: 20px auto;
            width: 95%;
            max-width: 500px;
            border-radius: 25px;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 107, 157, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid rgba(255, 107, 157, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(102, 126, 234, 0.1));
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-body {
            padding: 30px;
        }

        /* –°–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ —Å —Å–≤–∞–π–ø–æ–º */
        .slider {
            position: relative;
            margin-bottom: 20px;
        }

        .slider-main {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            background: var(--card);
        }

        .slider-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .slider-image.active {
            display: block;
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            transform: translateY(-50%);
            z-index: 2;
        }

        .slider-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .slider-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .slider-thumbs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .slider-thumb {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .slider-thumb.active {
            border-color: var(--primary);
        }

        .slider-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
        .comments-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 107, 157, 0.1);
        }

        .comments-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .comment-form {
            background: rgba(255, 107, 157, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 157, 0.1);
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }

        .comment-form.active {
            display: block;
        }

        .comment-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: 12px;
            color: var(--text);
            font-size: 14px;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 80px;
        }

        .comment-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .rating-select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: 12px;
            color: var(--text);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .comments-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .comment {
            background: rgba(255, 107, 157, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 107, 157, 0.1);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .comment-author {
            font-weight: 600;
            color: var(--primary);
        }

        .comment-date {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .comment-text {
            color: var(--text);
            line-height: 1.5;
            font-size: 14px;
        }

        .no-comments {
            text-align: center;
            color: var(--text-secondary);
            padding: 30px;
            font-style: italic;
        }

        /* –ü—Ä–æ–º–æ–∫–æ–¥ –º–æ–¥–∞–ª–∫–∞ */
        .promo-modal .modal-content {
            max-width: 400px;
        }

        .promo-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .promo-input {
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 107, 157, 0.05);
            border: 2px solid var(--primary);
            border-radius: 15px;
            color: var(--text);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .promo-input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .promo-result {
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .promo-success {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .promo-error {
            background: rgba(220, 53, 69, 0.1);
            color: var(--error);
            border: 1px solid var(--error);
        }

        /* –ß–∞—Ç */
        .chat-modal {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 85%;
            background: var(--surface);
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            z-index: 2001;
            border: 1px solid rgba(255, 107, 157, 0.2);
            box-shadow: 0 -10px 50px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255, 107, 157, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(102, 126, 234, 0.1));
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }

        .chat-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary);
        }

        .chat-body {
            padding: 25px;
            height: calc(100% - 160px);
            overflow-y: auto;
            background: var(--background);
        }

        .chat-footer {
            padding: 20px;
            border-top: 1px solid rgba(255, 107, 157, 0.1);
            display: flex;
            gap: 15px;
            align-items: flex-end;
            background: var(--surface);
        }

        .chat-input-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-input {
            padding: 15px 20px;
            border: 1px solid rgba(255, 107, 157, 0.2);
            border-radius: 25px;
            outline: none;
            background: rgba(255, 107, 157, 0.05);
            color: var(--text);
            font-size: 16px;
            resize: none;
            min-height: 50px;
            max-height: 120px;
        }

        .chat-input::placeholder {
            color: var(--text-secondary);
        }

        .file-input {
            display: none;
        }

        .file-btn {
            background: rgba(255, 107, 157, 0.1);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--primary);
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .file-btn:hover {
            background: rgba(255, 107, 157, 0.2);
            transform: scale(1.1);
        }

        .chat-send {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .chat-send:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.6);
        }

        .message {
            margin-bottom: 20px;
            max-width: 80%;
            animation: messageAppear 0.3s ease;
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.user {
            margin-left: auto;
        }

        .message.other {
            margin-right: auto;
        }

        .message-bubble {
            padding: 15px 20px;
            border-radius: 25px;
            word-wrap: break-word;
            position: relative;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 25px 25px 8px 25px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        .message.other .message-bubble {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            border-radius: 25px 25px 25px 8px;
            border: 1px solid rgba(255, 107, 157, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .file-message {
            max-width: 300px;
        }

        .file-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .file-info {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .file-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
            display: block;
            margin-top: 8px;
            font-weight: 600;
        }

        .file-link:hover {
            text-decoration: underline;
        }

        .system-message {
            text-align: center;
            margin: 25px 0;
        }

        .system-bubble {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            display: inline-block;
            max-width: 80%;
            font-size: 14px;
            font-weight: 500;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* –ú–æ–¥–∞–ª–∫–∞ –æ–ø–ª–∞—Ç—ã */
        .payment-modal .modal-content {
            max-width: 450px;
        }

        .crypto-option {
            background: rgba(255, 107, 157, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 107, 157, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .crypto-option:hover {
            background: rgba(255, 107, 157, 0.1);
            border-color: var(--primary);
        }

        .crypto-option.selected {
            background: rgba(255, 107, 157, 0.15);
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }

        .crypto-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .crypto-icon {
            font-size: 24px;
        }

        .crypto-details h4 {
            margin-bottom: 5px;
            color: var(--text);
        }

        .crypto-details p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .wallet-address {
            background: rgba(255, 107, 157, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            border: 1px solid rgba(255, 107, 157, 0.1);
            font-family: monospace;
            word-break: break-all;
            display: none;
        }

        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .payment-success {
            text-align: center;
            padding: 40px 20px;
            display: none;
        }

        .success-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 20px;
        }

        .profile-info-payment {
            background: rgba(255, 107, 157, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 157, 0.1);
        }

        .profile-info-payment h4 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .profile-details {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .profile-detail {
            background: rgba(255, 107, 157, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            color: var(--primary);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .filters-sidebar {
                width: 100%;
                left: -100%;
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .container {
                padding: 15px;
            }

            .logo {
                font-size: 3rem;
            }

            .header-stats {
                gap: 20px;
            }

            .stat-number {
                font-size: 1.5rem;
            }

            .stats-banner-content {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .chat-modal {
                height: 90%;
            }

            .slider-main {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .card-actions {
                flex-direction: column;
            }

            .filter-actions {
                flex-direction: column;
            }

            .language-btn {
                padding: 10px 15px;
                font-size: 12px;
            }

            .filters-toggle {
                width: 50px;
                height: 50px;
            }

            .slider-main {
                height: 250px;
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease;
        }
    </style>
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="background-animation"></div>

    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">Ashoo</div>
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loading-text">Loading premium experience...</div>
        </div>
    </div>

    <div class="container" id="main-content">
        <!-- Language Selector -->
        <div class="language-selector">
            <button class="language-btn" id="language-btn">
                <span>üåê</span>
                <span id="language-text">EN</span>
            </button>
            <div class="language-dropdown" id="language-dropdown">
                <div class="language-option" data-lang="en">üá∫üá∏ English</div>
                <div class="language-option" data-lang="ja">üáØüáµ Êó•Êú¨Ë™û</div>
                <div class="language-option" data-lang="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</div>
                <div class="language-option" data-lang="ar">üá¶üá™ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</div>
                <div class="language-option" data-lang="zh">üá®üá≥ ‰∏≠Êñá</div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
        <button class="filters-toggle" id="filters-toggle">
            <div class="filter-bar"></div>
            <div class="filter-bar"></div>
            <div class="filter-bar"></div>
        </button>

        <!-- –ì–ª–∞–≤–Ω—ã–π —Ö–µ–¥–µ—Ä -->
        <header class="main-header fade-in">
            <div class="header-content">
                <div class="logo">Ashoo</div>
                <div class="subtitle" id="app-subtitle">100% Anonymous Dating</div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="profiles-count">0</span>
                        <span class="stat-label" id="premium-profiles-label">Premium Profiles</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="online-count">0</span>
                        <span class="stat-label" id="online-now-label">Online Now</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">100%</span>
                        <span class="stat-label" id="anonymous-dating-label">Anonymous Dating</span>
                    </div>
                </div>

                <!-- –ë–∞–Ω–Ω–µ—Ä –ø–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
                <div class="stats-banner" id="stats-banner">
                    <div class="stats-banner-content">
                        <span class="stats-banner-text" id="stats-banner-text"></span>
                        <a href="#" class="stats-banner-link" id="stats-banner-link" target="_blank"></a>
                        <button class="close-stats-banner" id="close-stats-banner">‚úï</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã -->
        <div class="active-filters" id="active-filters"></div>

        <!-- –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
        <div class="cards-grid" id="cards-container">
            <div class="loading" id="main-loading">
                <div style="font-size: 3rem; margin-bottom: 20px;"></div>
                Loading premium profiles...
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –µ—â–µ -->
        <div class="loading" id="loading-more" style="display: none;">
            <div id="loading-more-text">Discovering more exclusive matches...</div>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
    <div class="filters-overlay" id="filters-overlay"></div>
    <div class="filters-sidebar" id="filters-sidebar">
        <div class="filters-header">
            <h3 class="filters-title" id="filters-title">Filters</h3>
            <button class="close-btn" id="close-filters">‚úï</button>
        </div>

        <div class="filters-body">
            <!-- –ì–æ—Ä–æ–¥ -->
            <div class="filter-group">
                <label id="filter-city-label">City</label>
                <div class="city-selector">
                    <select id="filter-city" class="modern-select">
                        <option value="all" id="all-cities">All cities</option>
                    </select>
                </div>
            </div>

            <!-- –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å -->
            <div class="filter-group">
                <label id="filter-nationality-label">Nationality</label>
                <div class="city-selector">
                    <select id="filter-nationality" class="modern-select">
                        <option value="all" id="all-nationalities">All nationalities</option>
                    </select>
                </div>
            </div>

            <!-- –ì–æ—Ä–æ–¥ –≤—ã–ª–µ—Ç–∞ -->
            <div class="filter-group">
                <label id="filter-travel-city-label">Travel City</label>
                <div class="city-selector">
                    <select id="filter-travel-city" class="modern-select">
                        <option value="all" id="all-travel-cities">All travel cities</option>
                    </select>
                </div>
            </div>

            <!-- –í–æ–∑—Ä–∞—Å—Ç -->
            <div class="filter-group">
                <label id="filter-age-label">Age</label>
                <div class="range-inputs">
                    <input type="number" id="filter-age-min" placeholder="18" min="18" max="70" value="18">
                    <span>-</span>
                    <input type="number" id="filter-age-max" placeholder="70" min="18" max="70" value="70">
                </div>
            </div>

            <!-- –†–æ—Å—Ç -->
            <div class="filter-group">
                <label id="filter-height-label">Height (cm)</label>
                <div class="range-inputs">
                    <input type="number" id="filter-height-min" placeholder="120" min="120" max="220" value="120">
                    <span>-</span>
                    <input type="number" id="filter-height-max" placeholder="220" min="120" max="220" value="220">
                </div>
            </div>

            <!-- –í–µ—Å -->
            <div class="filter-group">
                <label id="filter-weight-label">Weight (kg)</label>
                <div class="range-inputs">
                    <input type="number" id="filter-weight-min" placeholder="35" min="35" max="120" value="35">
                    <span>-</span>
                    <input type="number" id="filter-weight-max" placeholder="120" min="35" max="120" value="120">
                </div>
            </div>

            <!-- –ì—Ä—É–¥—å -->
            <div class="filter-group">
                <label id="filter-chest-label">Chest</label>
                <div class="range-inputs">
                    <input type="number" id="filter-chest-min" placeholder="1" min="1" max="12" value="1">
                    <span>-</span>
                    <input type="number" id="filter-chest-max" placeholder="12" min="1" max="12" value="12">
                </div>
            </div>

            <div class="filter-actions">
                <button class="btn btn-secondary" id="reset-filters">
                    <span id="reset-text">Reset</span>
                </button>
                <button class="btn btn-primary" id="apply-filters">
                    <span id="apply-text">Apply</span>
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-profile-name">Profile Name</h2>
                <button class="close-btn" id="close-modal">‚úï</button>
            </div>
            <div class="modal-body">
                <!-- –°–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ -->
                <div class="slider" id="profile-slider">
                    <div class="slider-main" id="slider-main">
                        <!-- –§–æ—Ç–æ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                    <div class="slider-nav">
                        <button class="slider-btn" id="prev-slide">‚Äπ</button>
                        <button class="slider-btn" id="next-slide">‚Ä∫</button>
                    </div>
                    <div class="slider-thumbs" id="slider-thumbs"></div>
                </div>

                <div class="profile-stats-modal">
                    <div class="stat-badge"><span id="modal-profile-age">25</span> <span id="years-text">years</span></div>
                    <div class="stat-badge"><span id="modal-profile-height">170</span> <span id="cm-text">cm</span></div>
                    <div class="stat-badge"><span id="modal-profile-weight">55</span> <span id="kg-text">kg</span></div>
                    <div class="stat-badge"><span id="modal-profile-chest">3</span> chest</div>
                </div>

                <div class="profile-info">
                    <div class="info-item">
                        <span class="info-icon">City:</span>
                        <span id="modal-profile-city"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">Nationality:</span>
                        <span id="modal-profile-nationality"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">Travel Cities:</span>
                        <span id="modal-profile-travel-cities"> </span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">Description:</span>
                        <span id="modal-profile-description"> </span>
                    </div>
                </div>

                <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
                <div class="comments-section">
                    <h3 class="comments-title" id="comments-title">Comments</h3>

                    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
                    <div class="comment-form" id="comment-form">
                        <textarea class="comment-input" id="comment-input" placeholder="Your comment..."></textarea>
                        <button class="btn btn-primary" id="post-comment-btn">
                            <span id="post-comment-text">Post Comment</span>
                        </button>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
                    <div class="comments-list" id="comments-list">
                        <div class="no-comments" id="no-comments">No comments yet</div>
                    </div>
                </div>

                <div class="card-actions">
                    <button class="btn btn-primary" id="write-btn">
                        <span id="write-text">Write Message</span>
                    </button>
                    <button class="btn btn-pay" id="pay-btn">
                        <span id="pay-text">Book with Crypto</span>
                    </button>
                    <button class="btn btn-promo" id="promo-btn">
                        <span id="promo-text">Use Promo Code</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–º–æ–∫–æ–¥–∞ -->
    <div class="modal promo-modal" id="promo-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Promo Code</h2>
                <button class="close-btn" id="close-promo">‚úï</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);" id="promo-description">
                    Enter your promo code to get a special discount
                </p>
                <div class="promo-input-group">
                    <input type="text" class="promo-input" id="promo-input" placeholder="Enter promo code">
                    <button class="btn btn-primary" id="apply-promo">
                        <span id="apply-promo-text">Apply</span>
                    </button>
                </div>
                <div class="promo-result" id="promo-result"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" id="close-promo-btn">
                        <span id="close-promo-text">Close</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã -->
    <div class="modal payment-modal" id="payment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Crypto Payment</h2>
                <button class="close-btn" id="close-payment">‚úï</button>
            </div>
            <div class="modal-body" id="payment-body">
                <div id="payment-selection">
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ -->
                    <div class="profile-info-payment">
                        <h4 id="payment-profile-title">Booking Profile</h4>
                        <div class="profile-details">
                            <span class="profile-detail" id="payment-profile-name">Name: </span>
                            <span class="profile-detail" id="payment-profile-age">Age: </span>
                            <span class="profile-detail" id="payment-profile-city">City: </span>
                        </div>
                    </div>

                    <p style="margin-bottom: 20px; color: var(--text-secondary);" id="payment-description">Select cryptocurrency and enter amount</p>

                    <div class="form-group">
                        <label id="payment-amount-label">Amount (USD)</label>
                        <input type="number" id="payment-amount" class="modern-select" placeholder="100" min="10" value="100">
                    </div>

                    <div class="crypto-option" data-crypto="trc20">
                        <div class="crypto-info">
                            <div class="crypto-icon">‚Çø</div>
                            <div class="crypto-details">
                                <h4>USDT (TRC20)</h4>
                                <p>Fast transactions, low fees</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="erc20">
                        <div class="crypto-info">
                            <div class="crypto-icon">Œû</div>
                            <div class="crypto-details">
                                <h4>USDT (ERC20)</h4>
                                <p>Ethereum network</p>
                            </div>
                        </div>
                    </div>

                    <div class="crypto-option" data-crypto="bnb">
                        <div class="crypto-info">
                            <div class="crypto-icon">‚óÜ</div>
                            <div class="crypto-details">
                                <h4>BNB (BEP20)</h4>
                                <p>Binance Smart Chain</p>
                            </div>
                        </div>
                    </div>

                    <div class="wallet-address" id="wallet-address">
                        <strong id="wallet-address-label">Wallet Address:</strong>
                        <div id="address-text" style="margin: 10px 0; word-break: break-all;"></div>
                        <button class="copy-btn" id="copy-address">Copy Address</button>
                    </div>

                    <button class="btn btn-primary" id="confirm-payment" style="width: 100%; margin-top: 20px;">
                        <span id="confirm-payment-text">Confirm Payment</span>
                    </button>
                </div>

                <div class="payment-success" id="payment-success">
                    <div class="success-icon">‚è≥</div>
                    <h3 id="payment-success-title">Awaiting Confirmation</h3>
                    <p id="payment-success-message">Your payment is being processed. Please wait for confirmation message.</p>
                    <button class="btn btn-primary" id="close-success">
                        <span id="close-success-text">Close</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç–∞ -->
    <div class="chat-modal" id="chat-modal">
        <div class="chat-header">
            <h3 class="chat-title">
                <img src="" alt="Profile" class="chat-avatar" id="chat-avatar">
                <span id="chat-title-text">Chat with ...</span>
            </h3>
            <button class="close-btn" id="close-chat">‚úï</button>
        </div>
        <div class="chat-body" id="chat-body"></div>
        <div class="chat-footer">
            <input type="file" class="file-input" id="file-input" accept="image/*,video/*,.pdf,.doc,.docx">
            <button class="file-btn" id="file-btn">
                <span id="attach-file-text">Attach</span>
            </button>
            <div class="chat-input-container">
                <textarea class="chat-input" id="chat-input" placeholder="Type a message..." rows="1"></textarea>
            </div>
            <button class="chat-send" id="chat-send">‚û§</button>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentProfiles = [];
        let currentPage = 0;
        let isLoading = false;
        let currentProfile = null;
        let currentSlideIndex = 0;
        const profilesPerPage = 12;
        let onlineCount = 0;
        let onlineUpdateInterval = null;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞
        let chatUpdateInterval = null;
        let lastMessageId = 0;
        let canComment = false; // –ú–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

        // –§–∏–ª—å—Ç—Ä—ã
        let currentFilters = {
            city: 'all',
            nationality: 'all',
            travel_city: 'all',
            age_min: 18,
            age_max: 70,
            height_min: 120,
            height_max: 220,
            weight_min: 35,
            weight_max: 120,
            chest_min: 1,
            chest_max: 12
        };

        // –¢–µ–∫—É—â–∏–π —è–∑—ã–∫
        let currentLanguage = 'en';
        let translations = {};

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const loadingScreen = document.getElementById('loading-screen');
        const mainContent = document.getElementById('main-content');
        const cardsContainer = document.getElementById('cards-container');
        const loadingMore = document.getElementById('loading-more');
        const profileModal = document.getElementById('profile-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const modalProfileName = document.getElementById('modal-profile-name');
        const modalProfileAge = document.getElementById('modal-profile-age');
        const modalProfileHeight = document.getElementById('modal-profile-height');
        const modalProfileWeight = document.getElementById('modal-profile-weight');
        const modalProfileChest = document.getElementById('modal-profile-chest');
        const modalProfileCity = document.getElementById('modal-profile-city');
        const modalProfileNationality = document.getElementById('modal-profile-nationality');
        const modalProfileTravelCities = document.getElementById('modal-profile-travel-cities');
        const modalProfileDescription = document.getElementById('modal-profile-description');
        const writeBtn = document.getElementById('write-btn');
        const payBtn = document.getElementById('pay-btn');
        const promoBtn = document.getElementById('promo-btn');
        const chatModal = document.getElementById('chat-modal');
        const closeChatBtn = document.getElementById('close-chat');
        const chatBody = document.getElementById('chat-body');
        const chatInput = document.getElementById('chat-input');
        const chatSendBtn = document.getElementById('chat-send');
        const chatTitle = document.getElementById('chat-title-text');
        const chatAvatar = document.getElementById('chat-avatar');
        const fileInput = document.getElementById('file-input');
        const fileBtn = document.getElementById('file-btn');
        const promoModal = document.getElementById('promo-modal');
        const promoInput = document.getElementById('promo-input');
        const applyPromoBtn = document.getElementById('apply-promo');
        const promoResult = document.getElementById('promo-result');
        const closePromoBtn = document.getElementById('close-promo');
        const closePromoBtn2 = document.getElementById('close-promo-btn');
        const paymentModal = document.getElementById('payment-modal');
        const closePaymentBtn = document.getElementById('close-payment');
        const paymentAmount = document.getElementById('payment-amount');
        const walletAddress = document.getElementById('wallet-address');
        const addressText = document.getElementById('address-text');
        const copyAddressBtn = document.getElementById('copy-address');
        const confirmPaymentBtn = document.getElementById('confirm-payment');
        const paymentSuccess = document.getElementById('payment-success');
        const closeSuccessBtn = document.getElementById('close-success');
        const cryptoOptions = document.querySelectorAll('.crypto-option');
        const commentForm = document.getElementById('comment-form');
        const commentInput = document.getElementById('comment-input');
        const postCommentBtn = document.getElementById('post-comment-btn');
        const commentsList = document.getElementById('comments-list');
        const noComments = document.getElementById('no-comments');

        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å–ª–∞–π–¥–µ—Ä–∞
        const sliderMain = document.getElementById('slider-main');
        const sliderThumbs = document.getElementById('slider-thumbs');
        const prevSlideBtn = document.getElementById('prev-slide');
        const nextSlideBtn = document.getElementById('next-slide');

        // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤
        const filtersToggle = document.getElementById('filters-toggle');
        const filtersSidebar = document.getElementById('filters-sidebar');
        const filtersOverlay = document.getElementById('filters-overlay');
        const closeFiltersBtn = document.getElementById('close-filters');
        const filterCity = document.getElementById('filter-city');
        const filterNationality = document.getElementById('filter-nationality');
        const filterTravelCity = document.getElementById('filter-travel-city');
        const filterAgeMin = document.getElementById('filter-age-min');
        const filterAgeMax = document.getElementById('filter-age-max');
        const filterHeightMin = document.getElementById('filter-height-min');
        const filterHeightMax = document.getElementById('filter-height-max');
        const filterWeightMin = document.getElementById('filter-weight-min');
        const filterWeightMax = document.getElementById('filter-weight-max');
        const filterChestMin = document.getElementById('filter-chest-min');
        const filterChestMax = document.getElementById('filter-chest-max');
        const resetFiltersBtn = document.getElementById('reset-filters');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const activeFilters = document.getElementById('active-filters');

        // Language Selector
        const languageBtn = document.getElementById('language-btn');
        const languageDropdown = document.getElementById('language-dropdown');
        const languageText = document.getElementById('language-text');

        // –ë–∞–Ω–Ω–µ—Ä –ø–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
        const statsBanner = document.getElementById('stats-banner');
        const statsBannerText = document.getElementById('stats-banner-text');
        const statsBannerLink = document.getElementById('stats-banner-link');
        const closeStatsBanner = document.getElementById('close-stats-banner');

        // –≠–ª–µ–º–µ–Ω—Ç—ã –æ–ø–ª–∞—Ç—ã
        const paymentProfileName = document.getElementById('payment-profile-name');
        const paymentProfileAge = document.getElementById('payment-profile-age');
        const paymentProfileCity = document.getElementById('payment-profile-city');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', async function() {
            // –°—Ä–∞–∑—É —Å–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                    loadTranslations('en');
                    loadMoreProfiles();
                    setupEventListeners();
                    initFilters();
                    updateStats();
                    loadStatsBanner();
                    startOnlineCountUpdates();
                }, 500);
            }, 2000);

            if (typeof window.Telegram !== 'undefined') {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã
        function startOnlineCountUpdates() {
            updateOnlineCount(); // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            onlineUpdateInterval = setInterval(updateOnlineCount, 180000); // 3 –º–∏–Ω—É—Ç—ã
        }

        function updateOnlineCount() {
            const profilesCount = currentProfiles.length;
            onlineCount = Math.min(Math.floor(Math.random() * profilesCount) + 1, profilesCount);
            document.getElementById('online-count').textContent = onlineCount;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–Ω–Ω–µ—Ä–∞ –ø–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
        async function loadStatsBanner() {
            try {
                const response = await fetch('/api/settings/banner');
                const bannerData = await response.json();

                if (bannerData.visible && bannerData.text) {
                    statsBanner.style.display = 'block';
                    statsBannerText.textContent = bannerData.text;
                    statsBannerLink.textContent = bannerData.link_text || 'Join Channel';
                    statsBannerLink.href = bannerData.link || '#';
                }
            } catch (error) {
                console.error('Error loading banner:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        async function loadTranslations(lang) {
            try {
                const response = await fetch(`/api/translations/${lang}`);
                translations = await response.json();
                currentLanguage = lang;
                languageText.textContent = getLanguageCode(lang);
                applyTranslations();
            } catch (error) {
                console.error('Error loading translations:', error);
            }
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ —è–∑—ã–∫–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏
        function getLanguageCode(lang) {
            const codes = {
                'en': 'EN',
                'ja': 'JA',
                'ko': 'KO',
                'ar': 'AR',
                'zh': '‰∏≠Êñá'
            };
            return codes[lang] || 'EN';
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        function applyTranslations() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Ç–µ–∫—Å—Ç—ã
            document.getElementById('app-subtitle').textContent = translations.subtitle;
            document.getElementById('premium-profiles-label').textContent = translations.premium_profiles;
            document.getElementById('online-now-label').textContent = translations.online_now;
            document.getElementById('anonymous-dating-label').textContent = translations.anonymous_dating;
            document.getElementById('filters-title').textContent = translations.filters;
            document.getElementById('filter-city-label').textContent = translations.city;
            document.getElementById('all-cities').textContent = translations.all_cities;
            document.getElementById('filter-nationality-label').textContent = translations.nationality;
            document.getElementById('all-nationalities').textContent = translations.all_nationalities;
            document.getElementById('filter-travel-city-label').textContent = translations.travel_city;
            document.getElementById('all-travel-cities').textContent = translations.all_cities;
            document.getElementById('filter-age-label').textContent = translations.age;
            document.getElementById('filter-height-label').textContent = translations.height;
            document.getElementById('filter-weight-label').textContent = translations.weight;
            document.getElementById('filter-chest-label').textContent = translations.chest;
            document.getElementById('reset-text').textContent = translations.reset;
            document.getElementById('apply-text').textContent = translations.apply;
            document.getElementById('main-loading').textContent = translations.loading;
            document.getElementById('loading-more-text').textContent = translations.loading_more;
            document.getElementById('write-text').textContent = translations.write_message;
            document.getElementById('pay-text').textContent = translations.book_with_crypto;
            document.getElementById('promo-text').textContent = translations.promocode;
            document.getElementById('years-text').textContent = translations.years;
            document.getElementById('cm-text').textContent = translations.cm;
            document.getElementById('kg-text').textContent = translations.kg;
            document.getElementById('apply-promo-text').textContent = translations.apply_promocode;
            document.getElementById('close-promo-text').textContent = translations.close;
            document.getElementById('promo-description').textContent = translations.enter_promocode;
            document.getElementById('comments-title').textContent = translations.comments;
            document.getElementById('post-comment-text').textContent = translations.post_comment;
            document.getElementById('no-comments').textContent = translations.no_comments;
            document.getElementById('comment-input').placeholder = translations.your_comment;
            document.getElementById('confirm-payment-text').textContent = translations.pay_now;
            document.getElementById('payment-amount-label').textContent = translations.amount;
            document.getElementById('payment-description').textContent = translations.select_crypto;
            document.getElementById('wallet-address-label').textContent = translations.wallet_address;
            document.getElementById('payment-profile-title').textContent = translations.booking_profile;
            document.getElementById('payment-success-title').textContent = translations.payment_awaiting;
            document.getElementById('payment-success-message').textContent = translations.payment_processing;
            document.getElementById('close-success-text').textContent = translations.close;
            document.getElementById('chat-title-text').textContent = translations.chat_with;
            document.getElementById('attach-file-text').textContent = translations.attach_file;

            chatInput.placeholder = translations.type_message;

            updateActiveFilters();
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // Language Selector
            languageBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                languageDropdown.classList.toggle('active');
            });

            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                    languageDropdown.classList.remove('active');
                });
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ language dropdown –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
            document.addEventListener('click', function(event) {
                if (!languageBtn.contains(event.target)) {
                    languageDropdown.classList.remove('active');
                }
            });

            // –ë–∞–Ω–Ω–µ—Ä –ø–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
            closeStatsBanner.addEventListener('click', function() {
                statsBanner.style.display = 'none';
            });

            // –§–∏–ª—å—Ç—Ä—ã
            filtersToggle.addEventListener('click', openFilters);
            closeFiltersBtn.addEventListener('click', closeFilters);
            filtersOverlay.addEventListener('click', closeFilters);
            resetFiltersBtn.addEventListener('click', resetFilters);
            applyFiltersBtn.addEventListener('click', applyFilters);

            // –°–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ
            prevSlideBtn.addEventListener('click', prevSlide);
            nextSlideBtn.addEventListener('click', nextSlide);

            // –°–≤–∞–π–ø –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞
            let startX = 0;
            let endX = 0;

            sliderMain.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });

            sliderMain.addEventListener('touchend', (e) => {
                endX = e.changedTouches[0].clientX;
                handleSwipe();
            });

            function handleSwipe() {
                const swipeDistance = startX - endX;
                if (Math.abs(swipeDistance) > 50) { // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å–≤–∞–π–ø–∞
                    if (swipeDistance > 0) {
                        nextSlide();
                    } else {
                        prevSlide();
                    }
                }
            }

            // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            postCommentBtn.addEventListener('click', addComment);

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
            fileBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);

            // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            closeModalBtn.addEventListener('click', closeProfileModal);
            closeChatBtn.addEventListener('click', closeChatModal);
            writeBtn.addEventListener('click', openChat);
            payBtn.addEventListener('click', openPaymentModal);
            promoBtn.addEventListener('click', openPromoModal);
            closePromoBtn.addEventListener('click', closePromoModal);
            closePromoBtn2.addEventListener('click', closePromoModal);

            // –û–ø–ª–∞—Ç–∞
            closePaymentBtn.addEventListener('click', closePaymentModal);
            cryptoOptions.forEach(option => {
                option.addEventListener('click', function() {
                    cryptoOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    showWalletAddress(this.getAttribute('data-crypto'));
                });
            });
            copyAddressBtn.addEventListener('click', copyWalletAddress);
            confirmPaymentBtn.addEventListener('click', processPayment);
            closeSuccessBtn.addEventListener('click', closePaymentModal);

            // –ü—Ä–æ–º–æ–∫–æ–¥
            applyPromoBtn.addEventListener('click', applyPromoCode);
            promoInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') applyPromoCode();
            });

            // –ß–∞—Ç
            chatSendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // –ê–≤—Ç–æ-–≤—ã—Å–æ—Ç–∞ textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });

            window.addEventListener('scroll', handleScroll);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            const profilesCount = currentProfiles.length;
            document.getElementById('profiles-count').textContent = profilesCount;
        }

        // –°–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ
        function updateSlider() {
            if (!currentProfile || !currentProfile.photos) return;

            sliderMain.innerHTML = '';
            sliderThumbs.innerHTML = '';

            currentProfile.photos.forEach((photo, index) => {
                // –û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ
                const slide = document.createElement('img');
                slide.src = photo;
                slide.alt = `${currentProfile.name} photo ${index + 1}`;
                slide.className = 'slider-image';
                if (index === currentSlideIndex) {
                    slide.classList.add('active');
                }
                sliderMain.appendChild(slide);

                // –ú–∏–Ω–∏–∞—Ç—é—Ä–∞
                const thumb = document.createElement('div');
                thumb.className = `slider-thumb ${index === currentSlideIndex ? 'active' : ''}`;
                thumb.innerHTML = `<img src="${photo}" alt="Thumbnail ${index + 1}">`;
                thumb.addEventListener('click', () => {
                    currentSlideIndex = index;
                    updateSlider();
                });
                sliderThumbs.appendChild(thumb);
            });
        }

        function nextSlide() {
            if (!currentProfile || !currentProfile.photos) return;
            currentSlideIndex = (currentSlideIndex + 1) % currentProfile.photos.length;
            updateSlider();
        }

        function prevSlide() {
            if (!currentProfile || !currentProfile.photos) return;
            currentSlideIndex = (currentSlideIndex - 1 + currentProfile.photos.length) % currentProfile.photos.length;
            updateSlider();
        }

        // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        async function loadComments() {
            if (!currentProfile) return;

            try {
                const response = await fetch(`/api/profiles/${currentProfile.id}/comments`);
                const data = await response.json();

                commentsList.innerHTML = '';

                if (data.comments.length === 0) {
                    noComments.style.display = 'block';
                } else {
                    noComments.style.display = 'none';
                    data.comments.forEach(comment => {
                        const commentDiv = document.createElement('div');
                        commentDiv.className = 'comment';
                        commentDiv.innerHTML = `
                            <div class="comment-header">
                                <span class="comment-author">${comment.user_name}</span>
                                <span class="comment-date">${new Date(comment.created_at).toLocaleDateString()}</span>
                            </div>
                            <div class="comment-text">${comment.text}</div>
                        `;
                        commentsList.appendChild(commentDiv);
                    });
                }

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                checkCommentPermission();
            } catch (error) {
                console.error('Error loading comments:', error);
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        async function checkCommentPermission() {
            if (!currentProfile) return;

            try {
                const response = await fetch(`/api/chats/${currentProfile.id}/messages`);
                const data = await response.json();

                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                canComment = data.messages.some(msg =>
                    msg.is_system && msg.text && msg.text.toLowerCase().includes('transaction successful')
                );

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–ª–∏ —Å–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
                commentForm.style.display = canComment ? 'block' : 'none';
            } catch (error) {
                console.error('Error checking comment permission:', error);
                commentForm.style.display = 'none';
            }
        }

        async function addComment() {
            if (!currentProfile || !canComment) return;

            const text = commentInput.value.trim();

            if (!text) {
                alert('Please enter comment text');
                return;
            }

            try {
                const response = await fetch(`/api/profiles/${currentProfile.id}/comments`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        user_name: 'Anonymous User', // –í—Å–µ–≥–¥–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã–π
                        text: text
                    })
                });

                if (response.ok) {
                    commentInput.value = '';
                    loadComments();
                } else {
                    alert('Error adding comment');
                }
            } catch (error) {
                console.error('Error adding comment:', error);
                alert('Error adding comment');
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                sendMessage(file);
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
        async function switchLanguage(lang) {
            await loadTranslations(lang);

            currentPage = 0;
            currentProfiles = [];
            cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            loadMoreProfiles();
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function openFilters() {
            filtersSidebar.classList.add('active');
            filtersOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function closeFilters() {
            filtersSidebar.classList.remove('active');
            filtersOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function resetFilters() {
            currentFilters = {
                city: 'all',
                nationality: 'all',
                travel_city: 'all',
                age_min: 18,
                age_max: 70,
                height_min: 120,
                height_max: 220,
                weight_min: 35,
                weight_max: 120,
                chest_min: 1,
                chest_max: 12
            };
            updateFilterInputs();
            updateActiveFilters();
            applyFilters();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ø–æ–ª—è—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function updateFilterInputs() {
            filterCity.value = currentFilters.city;
            filterNationality.value = currentFilters.nationality;
            filterTravelCity.value = currentFilters.travel_city;
            filterAgeMin.value = currentFilters.age_min;
            filterAgeMax.value = currentFilters.age_max;
            filterHeightMin.value = currentFilters.height_min;
            filterHeightMax.value = currentFilters.height_max;
            filterWeightMin.value = currentFilters.weight_min;
            filterWeightMax.value = currentFilters.weight_max;
            filterChestMin.value = currentFilters.chest_min;
            filterChestMax.value = currentFilters.chest_max;
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function applyFilters() {
            currentFilters = {
                city: filterCity.value,
                nationality: filterNationality.value,
                travel_city: filterTravelCity.value,
                age_min: parseInt(filterAgeMin.value) || 18,
                age_max: parseInt(filterAgeMax.value) || 70,
                height_min: parseInt(filterHeightMin.value) || 120,
                height_max: parseInt(filterHeightMax.value) || 220,
                weight_min: parseInt(filterWeightMin.value) || 35,
                weight_max: parseInt(filterWeightMax.value) || 120,
                chest_min: parseInt(filterChestMin.value) || 1,
                chest_max: parseInt(filterChestMax.value) || 12
            };

            updateActiveFilters();
            closeFilters();

            currentPage = 0;
            currentProfiles = [];
            cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            loadMoreProfiles();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function updateActiveFilters() {
            activeFilters.innerHTML = '';

            const filters = [];

            if (currentFilters.city !== 'all') {
                filters.push(`${currentFilters.city} <span class="remove" onclick="removeFilter('city')">√ó</span>`);
            }

            if (currentFilters.nationality !== 'all') {
                filters.push(`${currentFilters.nationality} <span class="remove" onclick="removeFilter('nationality')">√ó</span>`);
            }

            if (currentFilters.travel_city !== 'all') {
                filters.push(`${currentFilters.travel_city} <span class="remove" onclick="removeFilter('travel_city')">√ó</span>`);
            }

            if (currentFilters.age_min > 18 || currentFilters.age_max < 70) {
                filters.push(`${currentFilters.age_min}-${currentFilters.age_max} <span class="remove" onclick="removeFilter('age')">√ó</span>`);
            }

            if (currentFilters.height_min > 120 || currentFilters.height_max < 220) {
                filters.push(`${currentFilters.height_min}-${currentFilters.height_max}cm <span class="remove" onclick="removeFilter('height')">√ó</span>`);
            }

            if (currentFilters.weight_min > 35 || currentFilters.weight_max < 120) {
                filters.push(`${currentFilters.weight_min}-${currentFilters.weight_max}kg <span class="remove" onclick="removeFilter('weight')">√ó</span>`);
            }

            if (currentFilters.chest_min > 1 || currentFilters.chest_max < 12) {
                filters.push(`${currentFilters.chest_min}-${currentFilters.chest_max} <span class="remove" onclick="removeFilter('chest')">√ó</span>`);
            }

            filters.forEach(filter => {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = filter;
                activeFilters.appendChild(tag);
            });
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
        function removeFilter(type) {
            switch(type) {
                case 'city':
                    currentFilters.city = 'all';
                    break;
                case 'nationality':
                    currentFilters.nationality = 'all';
                    break;
                case 'travel_city':
                    currentFilters.travel_city = 'all';
                    break;
                case 'age':
                    currentFilters.age_min = 18;
                    currentFilters.age_max = 70;
                    break;
                case 'height':
                    currentFilters.height_min = 120;
                    currentFilters.height_max = 220;
                    break;
                case 'weight':
                    currentFilters.weight_min = 35;
                    currentFilters.weight_max = 120;
                    break;
                case 'chest':
                    currentFilters.chest_min = 1;
                    currentFilters.chest_max = 12;
                    break;
            }

            updateFilterInputs();
            updateActiveFilters();

            currentPage = 0;
            currentProfiles = [];
            cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            loadMoreProfiles();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
        async function initFilters() {
            await loadCities();
            await loadNationalities();
            await loadTravelCities();
            updateFilterInputs();
            updateActiveFilters();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤
        async function loadCities() {
            try {
                const response = await fetch('/api/filters/cities');
                const data = await response.json();

                filterCity.innerHTML = `<option value="all">${translations.all_cities}</option>`;
                data.cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    filterCity.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading cities:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–µ–π
        async function loadNationalities() {
            try {
                const response = await fetch('/api/filters/nationalities');
                const data = await response.json();

                filterNationality.innerHTML = `<option value="all">${translations.all_nationalities}</option>`;
                data.nationalities.forEach(nationality => {
                    const option = document.createElement('option');
                    option.value = nationality;
                    option.textContent = nationality;
                    filterNationality.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading nationalities:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –≤—ã–ª–µ—Ç–∞
        async function loadTravelCities() {
            try {
                const response = await fetch('/api/filters/travel_cities');
                const data = await response.json();

                filterTravelCity.innerHTML = `<option value="all">${translations.all_cities}</option>`;
                data.travel_cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    filterTravelCity.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading travel cities:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
        async function loadMoreProfiles() {
            if (isLoading) return;

            isLoading = true;
            if (currentPage === 0) {
                loadingMore.style.display = 'block';
            }

            try {
                const params = new URLSearchParams({
                    page: currentPage,
                    limit: profilesPerPage,
                    ...currentFilters
                });

                const response = await fetch(`/api/profiles?${params}`);
                const data = await response.json();

                if (data.profiles.length > 0) {
                    currentProfiles = [...currentProfiles, ...data.profiles];
                    renderProfiles(data.profiles);
                    currentPage++;
                } else if (currentPage === 0) {
                    // –ï—Å–ª–∏ –Ω–µ—Ç –∞–Ω–∫–µ—Ç –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–∫–∞—Ç
                    cardsContainer.innerHTML = `<div class="no-profiles">${translations.no_profiles}</div>`;
                }

                if (!data.has_more) {
                    loadingMore.style.display = 'none';
                }

                updateStats();
            } catch (error) {
                console.error('Error loading profiles:', error);
                cardsContainer.innerHTML = `<div class="loading">${translations.loading}</div>`;
            }

            isLoading = false;
            if (currentPage > 0) {
                loadingMore.style.display = 'none';
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π
        function renderProfiles(profiles) {
            if (currentPage === 0) {
                cardsContainer.innerHTML = '';
            }

            profiles.forEach(profile => {
                const card = document.createElement('div');
                card.className = 'card fade-in';
                card.innerHTML = `
                    <div class="card-badge">${translations.new}</div>
                    <img src="${profile.photos[0]}" alt="${profile.name}" class="card-image">
                    <div class="card-content">
                        <h3 class="card-title">${profile.name} <span class="card-age">${profile.age}</span></h3>
                        <p class="card-info">${profile.city} ‚Ä¢ ${profile.nationality || 'Unknown'}</p>
                        <div class="card-stats">
                            <span class="stat-badge">${profile.height} ${translations.cm}</span>
                            <span class="stat-badge">${profile.weight} ${translations.kg}</span>
                            <span class="stat-badge">${profile.chest} chest</span>
                        </div>
                        <p class="card-description">${profile.description}</p>
                        <div class="card-actions">
                            <button class="btn btn-secondary view-profile" data-id="${profile.id}">
                                <span>${translations.view_profile}</span>
                            </button>
                        </div>
                    </div>
                `;
                cardsContainer.appendChild(card);
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', function(event) {
                    if (!event.target.closest('.view-profile')) {
                        const profileId = this.querySelector('.view-profile').getAttribute('data-id');
                        openProfileModal(parseInt(profileId));
                    }
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "View Profile"
            document.querySelectorAll('.view-profile').forEach(btn => {
                btn.addEventListener('click', function(event) {
                    event.stopPropagation();
                    const profileId = parseInt(this.getAttribute('data-id'));
                    openProfileModal(profileId);
                });
            });
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è
        async function openProfileModal(profileId) {
            try {
                const response = await fetch(`/api/profiles/${profileId}`);
                currentProfile = await response.json();

                modalProfileName.textContent = currentProfile.name;
                modalProfileAge.textContent = currentProfile.age;
                modalProfileHeight.textContent = currentProfile.height;
                modalProfileWeight.textContent = currentProfile.weight;
                modalProfileChest.textContent = currentProfile.chest;
                modalProfileCity.textContent = currentProfile.city;
                modalProfileNationality.textContent = currentProfile.nationality || 'Unknown';

                const travelCities = currentProfile.travel_cities ? currentProfile.travel_cities.join(', ') : 'None';
                modalProfileTravelCities.textContent = travelCities;

                modalProfileDescription.textContent = currentProfile.description;

                currentSlideIndex = 0;
                updateSlider();
                loadComments();

                profileModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            } catch (error) {
                console.error('Error loading profile:', error);
                alert('Error loading profile');
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–æ—Ñ–∏–ª—è
        function closeProfileModal() {
            profileModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
        function openPromoModal() {
            promoModal.style.display = 'block';
            promoInput.value = '';
            promoResult.style.display = 'none';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
        function closePromoModal() {
            promoModal.style.display = 'none';
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
        async function applyPromoCode() {
            const code = promoInput.value.trim();

            if (!code) {
                showPromoResult(translations.enter_promocode, 'error');
                return;
            }

            try {
                const response = await fetch('/api/promocodes/validate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ code: code })
                });

                const result = await response.json();

                if (result.valid) {
                    showPromoResult(result.message, 'success');
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∫–∏–¥–∫—É –∫ –æ–ø–ª–∞—Ç–µ
                } else {
                    showPromoResult(result.message, 'error');
                }
            } catch (error) {
                console.error('Error validating promocode:', error);
                showPromoResult(translations.promocode_invalid, 'error');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞
        function showPromoResult(message, type) {
            promoResult.textContent = message;
            promoResult.className = `promo-result promo-${type}`;
            promoResult.style.display = 'block';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞
        function openChat() {
            if (!currentProfile) return;

            chatTitle.textContent = `${currentProfile.name}`;
            if (currentProfile.photos && currentProfile.photos.length > 0) {
                chatAvatar.src = currentProfile.photos[0];
            }
            chatBody.innerHTML = '';
            chatInput.value = '';
            fileInput.value = '';

            lastMessageId = 0;
            loadChatHistory();

            chatModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞
        function closeChatModal() {
            chatModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            stopChatUpdates();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
        async function loadChatHistory() {
            try {
                const response = await fetch(`/api/chats/${currentProfile.id}/messages`);
                const data = await response.json();

                chatBody.innerHTML = '';

                if (data.messages.length === 0) {
                    const welcomeMsg = document.createElement('div');
                    welcomeMsg.className = 'message other';
                    welcomeMsg.innerHTML = `
                        <div class="message-bubble">
                            ${translations.welcome_message}
                            <div class="message-time">${new Date().toLocaleTimeString()}</div>
                        </div>
                    `;
                    chatBody.appendChild(welcomeMsg);
                } else {
                    data.messages.forEach(msg => {
                        renderMessage(msg);
                        if (msg.id > lastMessageId) {
                            lastMessageId = msg.id;
                        }
                    });
                }

                chatBody.scrollTop = chatBody.scrollHeight;
                startChatUpdates();

            } catch (error) {
                console.error('Error loading chat:', error);
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        function renderMessage(msg) {
            if (msg.is_system) {
                // –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                const systemDiv = document.createElement('div');
                systemDiv.className = 'system-message';
                systemDiv.innerHTML = `<div class="system-bubble">${msg.text}</div>`;
                chatBody.appendChild(systemDiv);
                return;
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${msg.is_from_user ? 'user' : 'other'}`;

            let messageContent = '';

            if (msg.file_url) {
                // –°–æ–æ–±—â–µ–Ω–∏–µ —Å —Ñ–∞–π–ª–æ–º
                let fileContent = '';
                const fileType = msg.file_type || 'file';

                if (fileType === 'image') {
                    fileContent = `
                        <img src="${msg.file_url}" alt="Image" class="file-preview">
                    `;
                } else if (fileType === 'video') {
                    fileContent = `
                        <video controls class="file-preview">
                            <source src="${msg.file_url}" type="video/mp4">
                            Your browser does not support video.
                        </video>
                    `;
                } else {
                    fileContent = `
                        <div class="file-info">${msg.file_name}</div>
                        <a href="${msg.file_url}" target="_blank" class="file-link">${translations.download}</a>
                    `;
                }

                messageContent = `
                    <div class="message-bubble file-message">
                        ${fileContent}
                        ${msg.text ? `<div style="margin-top: 8px;">${msg.text}</div>` : ''}
                        <div class="message-time">${new Date(msg.created_at).toLocaleTimeString()}</div>
                    </div>
                `;
            } else {
                // –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                messageContent = `
                    <div class="message-bubble">
                        ${msg.text}
                        <div class="message-time">${new Date(msg.created_at).toLocaleTimeString()}</div>
                    </div>
                `;
            }

            messageDiv.innerHTML = messageContent;
            chatBody.appendChild(messageDiv);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        async function checkForNewMessages() {
            if (!currentProfile) return;

            try {
                const response = await fetch(`/api/chats/${currentProfile.id}/updates?last_message_id=${lastMessageId}`);
                const data = await response.json();

                if (data.messages.length > 0) {
                    data.messages.forEach(msg => {
                        renderMessage(msg);
                        if (msg.id > lastMessageId) {
                            lastMessageId = msg.id;
                        }
                    });

                    chatBody.scrollTop = chatBody.scrollHeight;
                }

                if (data.last_message_id > lastMessageId) {
                    lastMessageId = data.last_message_id;
                }

            } catch (error) {
                console.error('Error checking updates:', error);
            }
        }

        // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        function startChatUpdates() {
            if (chatUpdateInterval) {
                clearInterval(chatUpdateInterval);
            }

            chatUpdateInterval = setInterval(checkForNewMessages, 2000);
        }

        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        function stopChatUpdates() {
            if (chatUpdateInterval) {
                clearInterval(chatUpdateInterval);
                chatUpdateInterval = null;
            }
            lastMessageId = 0;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        async function sendMessage(file = null) {
            const messageText = chatInput.value.trim();

            if (!messageText && !file) return;

            try {
                const formData = new FormData();
                if (messageText) formData.append('text', messageText);
                if (file) formData.append('file', file);

                const response = await fetch(`/api/chats/${currentProfile.id}/messages`, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    chatInput.value = '';
                    chatInput.style.height = 'auto';
                    fileInput.value = '';

                    if (result.message_id > lastMessageId) {
                        lastMessageId = result.message_id;
                    }

                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
                    loadChatHistory();
                } else {
                    throw new Error('Error sending');
                }

            } catch (error) {
                console.error('Error sending:', error);
                const errorMsg = document.createElement('div');
                errorMsg.className = 'message other';
                errorMsg.innerHTML = `<div class="message-bubble">${translations.error_sending}</div>`;
                chatBody.appendChild(errorMsg);
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø–ª–∞—Ç—ã
        async function openPaymentModal() {
            if (!currentProfile) return;

            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ—à–µ–ª—å–∫–∏
                const response = await fetch('/api/settings/crypto_wallets');
                const wallets = await response.json();

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                cryptoOptions.forEach(opt => opt.classList.remove('selected'));
                walletAddress.style.display = 'none';
                paymentSuccess.style.display = 'none';
                document.getElementById('payment-selection').style.display = 'block';

                // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ñ–∏–ª–µ
                paymentProfileName.textContent = `Name: ${currentProfile.name}`;
                paymentProfileAge.textContent = `Age: ${currentProfile.age}`;
                paymentProfileCity.textContent = `City: ${currentProfile.city}`;

                paymentModal.style.display = 'block';
            } catch (error) {
                console.error('Error opening payment modal:', error);
                alert('Error opening payment system');
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø–ª–∞—Ç—ã
        function closePaymentModal() {
            paymentModal.style.display = 'none';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
        async function showWalletAddress(cryptoType) {
            try {
                const response = await fetch('/api/settings/crypto_wallets');
                const wallets = await response.json();

                const address = wallets[cryptoType];
                if (address) {
                    addressText.textContent = address;
                    walletAddress.style.display = 'block';
                }
            } catch (error) {
                console.error('Error loading wallet address:', error);
            }
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
        function copyWalletAddress() {
            const address = addressText.textContent;
            navigator.clipboard.writeText(address).then(() => {
                const originalText = copyAddressBtn.textContent;
                copyAddressBtn.textContent = translations.copied;
                setTimeout(() => {
                    copyAddressBtn.textContent = originalText;
                }, 2000);
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
        async function processPayment() {
            const selectedCrypto = document.querySelector('.crypto-option.selected');
            if (!selectedCrypto) {
                alert('Please select cryptocurrency');
                return;
            }

            const amount = paymentAmount.value;
            if (!amount || amount < 10) {
                alert('Please enter valid amount (min $10)');
                return;
            }

            const cryptoType = selectedCrypto.getAttribute('data-crypto');

            try {
                confirmPaymentBtn.textContent = translations.payment_processing;
                confirmPaymentBtn.disabled = true;

                const response = await fetch('/api/payment/crypto', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        profile_id: currentProfile.id,
                        amount: amount,
                        currency: 'USD',
                        wallet: cryptoType
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
                    document.getElementById('payment-selection').style.display = 'none';
                    paymentSuccess.style.display = 'block';
                } else {
                    throw new Error(result.message || 'Payment failed');
                }

            } catch (error) {
                console.error('Error processing payment:', error);
                alert('Payment error: ' + error.message);
            } finally {
                confirmPaymentBtn.textContent = translations.pay_now;
                confirmPaymentBtn.disabled = false;
            }
        }

        // –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
        function handleScroll() {
            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;

            if (scrollTop + clientHeight >= scrollHeight - 100 && !isLoading) {
                loadMoreProfiles();
            }
        }

        // Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
        if (typeof window.Telegram === 'undefined') {
            window.Telegram = {
                WebApp: {
                    initData: 'test',
                    initDataUnsafe: {
                        user: {
                            id: 123456,
                            first_name: 'Test',
                            last_name: 'User',
                            username: 'testuser'
                        }
                    },
                    ready: function() { console.log('Telegram WebApp ready') },
                    expand: function() { console.log('WebApp expanded') },
                    close: function() { console.log('WebApp closed') },
                    sendData: function(data) {
                        console.log('Data sent to bot:', data)
                    }
                }
            };
        }
    </script>
</body>
</html>